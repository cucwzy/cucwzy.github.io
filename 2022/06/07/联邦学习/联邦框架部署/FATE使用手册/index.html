<!DOCTYPE html>

<html lang="en">

<head>
    
    <title>FATE使用手册 - Shuyan</title>
    <meta charset="UTF-8">
    <meta name="keywords" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
    
    

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <meta name="description" content="FATE简介​        FATE（Federated AI Technology Enabler）是微众银行AI部门发起的一个开源项目，旨在提供一个安全的计算框架来支持联邦AI生态系统。它实现了基于同态加密和多方计算（MPC）的安全计算协议。它支持联邦学习架构和各种机器学习算法的安全计算，包括逻辑回归、基于树的算法、深度学习和迁移学习。 FATE技术框架FederatedML 算法功能组件，">
<meta property="og:type" content="article">
<meta property="og:title" content="FATE使用手册">
<meta property="og:url" content="http://example.com/2022/06/07/%E8%81%94%E9%82%A6%E5%AD%A6%E4%B9%A0/%E8%81%94%E9%82%A6%E6%A1%86%E6%9E%B6%E9%83%A8%E7%BD%B2/FATE%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/index.html">
<meta property="og:site_name" content="Shuyan">
<meta property="og:description" content="FATE简介​        FATE（Federated AI Technology Enabler）是微众银行AI部门发起的一个开源项目，旨在提供一个安全的计算框架来支持联邦AI生态系统。它实现了基于同态加密和多方计算（MPC）的安全计算协议。它支持联邦学习架构和各种机器学习算法的安全计算，包括逻辑回归、基于树的算法、深度学习和迁移学习。 FATE技术框架FederatedML 算法功能组件，">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2022-06-07T03:11:05.000Z">
<meta property="article:modified_time" content="2022-06-07T15:58:42.201Z">
<meta property="article:author" content="Shuyan">
<meta property="article:tag" content="联邦学习">
<meta name="twitter:card" content="summary">
    <link rel="stylesheet" href="/lib/jquery.fancybox.min.css?v=1656038931216">
    
        <link rel="stylesheet" href="//at.alicdn.com/t/font_1038733_0xvrvpg9c0r.css">
    
    <link rel="stylesheet" href="/lib/mdui_043tiny/css/mdui.css?v=1656038931216">
    <link rel="stylesheet" href="/lib/iconfont/iconfont.css?v=1656038931216">
    <link rel="stylesheet" href="/css/style.css?v=1656038931216">
     
    
<meta name="generator" content="Hexo 5.4.0"></head>

<body class="mdui-drawer-body-left">
    
    <div id="nexmoe-background">
        <div class="nexmoe-bg" style="background-image: url(http://mms0.baidu.com/it/u=2467909075,3604847220&amp;fm=253&amp;app=138&amp;f=JPEG&amp;fmt=auto&amp;q=75?w=801&amp;h=500)"></div>
        <div class="mdui-appbar mdui-shadow-0">
            <div class="mdui-toolbar">
                <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon mdui-ripple"><i class="mdui-icon nexmoefont icon-menu"></i></a>
                <div class="mdui-toolbar-spacer"></div>
                <!--<a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></a>-->
                <a href="/" title="Shuyan" class="mdui-btn mdui-btn-icon"><img src="http://mms2.baidu.com/it/u=1730774443,2723245118&amp;fm=253&amp;app=120&amp;f=JPEG&amp;fmt=auto&amp;q=75?w=500&amp;h=500" alt="Shuyan"></a>
            </div>
        </div>
    </div>
    <div id="nexmoe-header">
        <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="Shuyan">
            <img src="http://mms2.baidu.com/it/u=1730774443,2723245118&amp;fm=253&amp;app=120&amp;f=JPEG&amp;fmt=auto&amp;q=75?w=500&amp;h=500" alt="Shuyan" alt="Shuyan">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>Articles</span>95</div>
        <div><span>Tags</span>20</div>
        <div><span>Categories</span>33</div>
    </div>
    <div class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/" title="回到首页">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                回到首页
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/categories" title="文章归档">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                文章归档
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/about" title="梦华录">
            <i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
            <div class="mdui-list-item-content">
                梦华录
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/PY.html" title="我的朋友">
            <i class="mdui-list-item-icon nexmoefont icon-unorderedlist"></i>
            <div class="mdui-list-item-content">
                我的朋友
            </div>
        </a>
        
    </div>
    <aside id="nexmoe-sidebar">
    
    <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-search">
         
            <form id="search_form" action_e="https://cn.bing.com/search?q=site:nexmoe.com" onsubmit="return search();">
                <label><input id="search_value" name="q" type="search" placeholder="Search"></label>
            </form>
         
    </div>
</div>
    
    <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-social">
        <a class="mdui-ripple" href="https://qm.qq.com/cgi-bin/qm/qr?k=rd1wdMWxpIZJe5AIruJkY7xD8d68h031&noverify=0" target="_blank" mdui-tooltip="{content: 'QQ'}" style="color: rgb(249, 174, 8);background-color: rgba(249, 174, 8, .1);">
            <i class="nexmoefont icon-QQ"></i>
        </a><a class="mdui-ripple" href="https://space.bilibili.com/400417888" target="_blank" mdui-tooltip="{content: '哔哩哔哩'}" style="color: rgb(231, 106, 141);background-color: rgba(231, 106, 141, .15);">
            <i class="nexmoefont icon-bilibili"></i>
        </a><a class="mdui-ripple" href="https://github.com/nexmoe/" target="_blank" mdui-tooltip="{content: 'GitHub'}" style="color: rgb(25, 23, 23);background-color: rgba(25, 23, 23, .15);">
            <i class="nexmoefont icon-github"></i>
        </a>
    </div>
</div>
    
    
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">Categories</h3>
    <div class="nexmoe-widget">

      <ul class="category-list">

        


        

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/C语言/">C语言</a>
          <span class="category-list-count">3</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Docker/">Docker</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/JAVA/">JAVA</a>
          <span class="category-list-count">42</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/JAVA/“Spring框架”/JavaWeb/">JavaWeb</a>
          <span class="category-list-count">3</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/LaTex/">LaTex</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Leetcode/">Leetcode</a>
          <span class="category-list-count">21</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Linux/">Linux</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/JAVA/“Spring框架”/Mybaits/">Mybaits</a>
          <span class="category-list-count">6</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/JAVA/“Spring框架”/SSM/">SSM</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/C语言/STL/">STL</a>
          <span class="category-list-count">3</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/JAVA/“Spring框架”/Spring/">Spring</a>
          <span class="category-list-count">7</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/JAVA/“Spring框架”/SpringBoot/">SpringBoot</a>
          <span class="category-list-count">3</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/JAVA/“Spring框架”/SpringMVC/">SpringMVC</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/JAVA/Spring框架/">Spring框架</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Leetcode/sort/">sort</a>
          <span class="category-list-count">3</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/JAVA/“Docker”/">“Docker”</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/JAVA/“JAVA基础知识”/">“JAVA基础知识”</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/JAVA/“JVM”/">“JVM”</a>
          <span class="category-list-count">3</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/JAVA/“Nginx”/">“Nginx”</a>
          <span class="category-list-count">8</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/JAVA/“Redis”/">“Redis”</a>
          <span class="category-list-count">3</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/JAVA/Spring框架/“Security”/">“Security”</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/JAVA/“Spring框架”/">“Spring框架”</a>
          <span class="category-list-count">22</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Leetcode/二叉树/">二叉树</a>
          <span class="category-list-count">4</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Leetcode/剑指offer/">剑指offer</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Leetcode/动态规划/">动态规划</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Leetcode/线性表/单链表/">单链表</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Leetcode/字符串/">字符串</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Leetcode/线性表/数组/">数组</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Leetcode/栈和队列/">栈和队列</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Leetcode/算法/">算法</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Leetcode/线性表/">线性表</a>
          <span class="category-list-count">3</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/联邦学习/">联邦学习</a>
          <span class="category-list-count">8</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Leetcode/贪心算法/">贪心算法</a>
          <span class="category-list-count">1</span>
        </li>

        
      </ul>

    </div>
  </div>


    
    
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">Tag Cloud</h3>
    <div id="randomtagcloud" class="nexmoe-widget tagcloud">
      <a href="/tags/Docker/" style="font-size: 12.86px;">Docker</a> <a href="/tags/JAVA/" style="font-size: 11.43px;">JAVA</a> <a href="/tags/JVM/" style="font-size: 12.86px;">JVM</a> <a href="/tags/JavaWeb/" style="font-size: 12.86px;">JavaWeb</a> <a href="/tags/LaTex/" style="font-size: 10px;">LaTex</a> <a href="/tags/Leetcode/" style="font-size: 20px;">Leetcode</a> <a href="/tags/Linux/" style="font-size: 11.43px;">Linux</a> <a href="/tags/Mybaits/" style="font-size: 15.71px;">Mybaits</a> <a href="/tags/Nginx/" style="font-size: 18.57px;">Nginx</a> <a href="/tags/Redis/" style="font-size: 12.86px;">Redis</a> <a href="/tags/SSM/" style="font-size: 10px;">SSM</a> <a href="/tags/STL/" style="font-size: 12.86px;">STL</a> <a href="/tags/Security/" style="font-size: 11.43px;">Security</a> <a href="/tags/Spring/" style="font-size: 17.14px;">Spring</a> <a href="/tags/SpringBoot/" style="font-size: 12.86px;">SpringBoot</a> <a href="/tags/SpringMVC/" style="font-size: 11.43px;">SpringMVC</a> <a href="/tags/%E4%BA%8C%E5%8F%89%E6%A0%91/" style="font-size: 14.29px;">二叉树</a> <a href="/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" style="font-size: 11.43px;">动态规划</a> <a href="/tags/%E6%90%9C%E7%B4%A2/" style="font-size: 11.43px;">搜索</a> <a href="/tags/%E8%81%94%E9%82%A6%E5%AD%A6%E4%B9%A0/" style="font-size: 18.57px;">联邦学习</a>
    </div>
    
  </div>
  <style>
    #nexmoe-header .nexmoe-widget-wrap .tagcloud a:nth-child(7n+1) {
    background-color: rgba(255,78,106,0.15);
    color: rgba(255,78,106,0.8);
    }
    #nexmoe-header .nexmoe-widget-wrap .tagcloud a:nth-child(7n+2) {
    background-color: rgba(255,170,115,0.15);
    color: #ffaa73;
    }
    #nexmoe-header .nexmoe-widget-wrap .tagcloud a:nth-child(7n+3) {
    background-color: rgba(254,212,102,0.15);
    color: #fed466;
    }
    #nexmoe-header .nexmoe-widget-wrap .tagcloud a:nth-child(7n+4) {
    background-color: rgba(60,220,130,0.15);
    color: #3cdc82;
    }
    #nexmoe-header .nexmoe-widget-wrap .tagcloud a:nth-child(7n+5) {
    background-color: rgba(100,220,240,0.15);
    color: #64dcf0;
    }
    #nexmoe-header .nexmoe-widget-wrap .tagcloud a:nth-child(7n+6) {
    background-color: rgba(100,185,255,0.15);
    color: #64b9ff;
    }
    #nexmoe-header .nexmoe-widget-wrap .tagcloud a:nth-child(7n+7) {
    background-color: rgba(180,180,255,0.15);
    color: #b4b4ff;
    }
    #nexmoe-content .nexmoe-post .nexmoe-post-meta {
    margin: 25px 0px;
    font-size: 0;
    }
    #nexmoe-content .nexmoe-post .nexmoe-post-meta a {
    border-radius: 20px;
    padding: 10px 18px;
    color: #fff;
    font-size: 14px;
    display: inline-block;
    margin-bottom: 5px;
    margin-right: 10px;
    }
    #nexmoe-content .nexmoe-post .nexmoe-post-meta a .nexmoefont {
    font-size: 14px;
    }
    #nexmoe-content .nexmoe-post .nexmoe-post-meta a:before,
    #nexmoe-content .nexmoe-post .nexmoe-post-meta i:before {
    margin-right: 5px;
    }
    #nexmoe-content .nexmoe-post .nexmoe-post-meta a:nth-child(7n+1) {
    background-color: rgba(255,78,106,0.15);
    color: #ff4e6a;
    }
    #nexmoe-content .nexmoe-post .nexmoe-post-meta a:nth-child(7n+2) {
    background-color: rgba(255,170,115,0.15);
    color: #ffaa73;
    }
    #nexmoe-content .nexmoe-post .nexmoe-post-meta a:nth-child(7n+3) {
    background-color: rgba(254,212,102,0.15);
    color: #fed466;
    }
    #nexmoe-content .nexmoe-post .nexmoe-post-meta a:nth-child(7n+4) {
    background-color: rgba(60,220,130,0.15);
    color: #3cdc82;
    }
    #nexmoe-content .nexmoe-post .nexmoe-post-meta a:nth-child(7n+5) {
    background-color: rgba(100,220,240,0.15);
    color: #64dcf0;
    }
    #nexmoe-content .nexmoe-post .nexmoe-post-meta a:nth-child(7n+6) {
    background-color: rgba(100,185,255,0.15);
    color: #64b9ff;
    }
    #nexmoe-content .nexmoe-post .nexmoe-post-meta a:nth-child(7n+7) {
    background-color: rgba(180,180,255,0.15);
    color: #b4b4ff;
    }
  </style>


    
</aside>
    <div class="nexmoe-copyright">
        &copy; 2022 Shuyan
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://github.com/theme-nexmoe/hexo-theme-nexmoe" target="_blank">Nexmoe</a>
        <br><a target="_blank" href=" "><img src="http://mms0.baidu.com/it/u=991445098,3809803602&fm=253&app=138&f=JPEG&fmt=auto&q=75?w=500&h=500" width="100px" ></a><script data-ad-client="ca-pub-2058306854838448" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    </div>
</div><!-- .nexmoe-drawer -->
    </div>
    <div id="nexmoe-content">
        <div class="nexmoe-primary">
            <div class="nexmoe-post">

  <article>
      
          <div class="nexmoe-post-cover" style="padding-bottom: 62.5%;"> 
              <img data-src="/img/联邦学习.jpg" data-sizes="auto" alt="FATE使用手册" class="lazyload">
              <h1>FATE使用手册</h1>
          </div>
      
      
      <div class="nexmoe-post-meta nexmoe-rainbow" style="margin:10px 0!important;">
    <a><i class="nexmoefont icon-calendar-fill"></i>2022年06月07日</a>
</div>

      

      <h2 id="FATE简介"><a href="#FATE简介" class="headerlink" title="FATE简介"></a>FATE简介</h2><p>​        FATE（Federated AI Technology Enabler）是微众银行AI部门发起的一个开源项目，旨在提供一个安全的计算框架来支持联邦AI生态系统。它实现了<strong>基于同态加密和多方计算（MPC）的安全计算协议</strong>。它支持联邦学习架构和各种机器学习算法的安全计算，包括逻辑回归、基于树的算法、深度学习和迁移学习。</p>
<h2 id="FATE技术框架"><a href="#FATE技术框架" class="headerlink" title="FATE技术框架"></a>FATE技术框架</h2><h4 id="FederatedML"><a href="#FederatedML" class="headerlink" title="FederatedML"></a>FederatedML</h4><p> 算法功能组件，包括常见机器学习算法联邦化实现。所有模块均采用模块化的解耦的方式进行开发，从而增强可扩展性。</p>
<h4 id="FATE-Flow"><a href="#FATE-Flow" class="headerlink" title="FATE_Flow"></a>FATE_Flow</h4><p> FATE-<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=Flow&spm=1001.2101.3001.7020">Flow</a>是联邦学习框架FATE的<strong>作业调度系统</strong>，实现联邦学习作业生命周期的完整管理，其中包括数据输入、训练作业调度、指标追踪、模型中心等功能。</p>
<h4 id="FATE-Board"><a href="#FATE-Board" class="headerlink" title="FATE-Board"></a>FATE-Board</h4><p> 联邦学习建模的可视化工具，为终端用户可视化和度量模型训练的全过程。支持对模型训练过程全流程的跟踪、统计和监控等，并为模型运行状态、模型输出、日志追踪等提供了丰富的可视化呈现，帮助用户简单而高效地深入探索模型与理解模型。</p>
<h4 id="FATE-Serving"><a href="#FATE-Serving" class="headerlink" title="FATE-Serving"></a>FATE-Serving</h4><p> 高性能可扩展的联邦学习在线模型服务。</p>
<h2 id="角色"><a href="#角色" class="headerlink" title="角色"></a>角色</h2><h4 id="Guest"><a href="#Guest" class="headerlink" title="Guest"></a>Guest</h4><p>​         Guest表示数据应用方，在纵向算法中，Guest往往是有标签y的一方。一般是由Guest发起建模流程。</p>
<h4 id="Host"><a href="#Host" class="headerlink" title="Host"></a>Host</h4><p>​         Host是数据提供方。</p>
<h4 id="arbiter"><a href="#arbiter" class="headerlink" title="arbiter"></a>arbiter</h4><p>​         arbiter是用来辅助多方完成联合建模的，主要的作用是用来聚合梯度或者模型,比如纵向lr里面,各方将自己一半的梯度发送给arbiter，然后arbiter再联合优化等等,arbiter还参与以及分发公私钥，进行加解密服务等等。</p>
<h2 id="FATE环境部署指南"><a href="#FATE环境部署指南" class="headerlink" title="FATE环境部署指南"></a>FATE环境部署指南</h2><h3 id="单机部署"><a href="#单机部署" class="headerlink" title="单机部署"></a>单机部署</h3><p>参考：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/standalone-deploy/README.html#install-fate-using-docker-recommended%EF%BC%8C">https://fate.readthedocs.io/en/latest/_build_temp/standalone-deploy/README.html#install-fate-using-docker-recommended，</a></p>
<p>包括<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/standalone-deploy/README.html#install-fate-using-docker-recommended">使用 Docker 安装 FATE*(推荐)*</a>和<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/standalone-deploy/README.html#install-fate-in-host">在主机中安装 FATE</a></p>
<h3 id="集群部署"><a href="#集群部署" class="headerlink" title="集群部署"></a>集群部署</h3><p>参考：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/build_temp/cluster-deploy/README.html">https://fate.readthedocs.io/en/latest/build_temp/cluster-deploy/README.html</a></p>
<h3 id="主机进入到docker-FATE镜像命令"><a href="#主机进入到docker-FATE镜像命令" class="headerlink" title="主机进入到docker FATE镜像命令"></a>主机进入到docker FATE镜像命令</h3><p>主机ip:192.168.1.75</p>
<p>FATE版本为1.6.0，主机执行以下命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">CONTAINER_ID=`docker ps -aqf <span class="hljs-string">&quot;name=fate&quot;</span>`<br>docker <span class="hljs-built_in">exec</span> -t -i <span class="hljs-variable">$&#123;CONTAINER_ID&#125;</span> bash<br></code></pre></td></tr></table></figure>

<h3 id="快速启动-FATE-的一般指南"><a href="#快速启动-FATE-的一般指南" class="headerlink" title="快速启动 FATE 的一般指南"></a>快速启动 FATE 的一般指南</h3><p>参考：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/examples/pipeline/README.html">https://fate.readthedocs.io/en/latest/_build_temp/examples/pipeline/README.html</a></p>
<p><strong>由于FATE已经启动，以下命令不需要执行</strong></p>
<ol>
<li><p>（可选）创建虚拟环境</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">python</span> <span class="hljs-string">-m venv venv</span><br><span class="hljs-attr">source</span> <span class="hljs-string">venv/bin/activate</span><br><span class="hljs-attr">pip</span> <span class="hljs-string">install -U pip</span><br></code></pre></td></tr></table></figure></li>
<li><p>安装FATE客户端</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">pip</span> <span class="hljs-string">install fate_client</span><br><span class="hljs-attr">pipeline</span> <span class="hljs-string">init --help</span><br></code></pre></td></tr></table></figure></li>
<li><p>提供部署的 FATE-Flow 的服务器 ip/port 信息</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-comment"># fate-flow server初始化 pipeline的ip和端口. 默认 ip：port 是127.0.0.1:8080.</span><br><span class="hljs-attr">pipeline</span> <span class="hljs-string">init --ip 127.0.0.1 --port 9380</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># 可选，设置Pipeline目录</span><br><span class="hljs-attr">pipeline</span> <span class="hljs-string">init --ip 127.0.0.1 --port 9380 --log-directory &#123;desired log path&#125;</span><br></code></pre></td></tr></table></figure></li>
<li><p>使用 FATE-Pipeline 上传数据</p>
<p>在开始建模任务之前，应上传要使用的数据。通常，一方通常是包含多个节点的集群。因此，当我们上传这些数据时，数据将分配给这些节点。</p>
<p>参考此文档测试用例1内容。</p>
</li>
</ol>
<h2 id="FATE使用预备知识"><a href="#FATE使用预备知识" class="headerlink" title="FATE使用预备知识"></a>FATE使用预备知识</h2><h3 id="上传数据指南"><a href="#上传数据指南" class="headerlink" title="上传数据指南"></a>上传数据指南</h3><p>参考：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/doc/upload_data_guide_zh.html">https://fate.readthedocs.io/en/latest/_build_temp/doc/upload_data_guide_zh.html</a></p>
<h4 id="接受的数据类型"><a href="#接受的数据类型" class="headerlink" title="接受的数据类型"></a>接受的数据类型</h4><ul>
<li>Dense</li>
<li>svm-light</li>
<li>tag</li>
<li>tag:value</li>
</ul>
<h4 id="定义上传数据配置文件"><a href="#定义上传数据配置文件" class="headerlink" title="定义上传数据配置文件"></a>定义上传数据配置文件</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&#123;</span><br>  <span class="hljs-meta">&quot;file&quot;</span>: <span class="hljs-string">&quot;examples/data/breast_hetero_guest.csv&quot;,</span><br>  <span class="hljs-meta">&quot;table_name&quot;</span>: <span class="hljs-string">&quot;hetero_breast_guest&quot;,</span><br>  <span class="hljs-meta">&quot;namespace&quot;</span>: <span class="hljs-string">&quot;experiment&quot;,</span><br>  <span class="hljs-meta">&quot;head&quot;</span>: <span class="hljs-string">1,</span><br>  <span class="hljs-meta">&quot;partition&quot;</span>: <span class="hljs-string">8,</span><br>  <span class="hljs-meta">&quot;work_mode&quot;</span>: <span class="hljs-string">0,</span><br>  <span class="hljs-meta">&quot;backend&quot;</span>: <span class="hljs-string">0</span><br><span class="hljs-attr">&#125;</span><br></code></pre></td></tr></table></figure>

<p>字段说明：</p>
<blockquote>
<ol>
<li>file: 文件路径</li>
<li>table_name&amp;namespace: 存储数据表的标识符号</li>
<li>head: 指定数据文件是否包含表头</li>
<li>partition: 指定用于存储数据的分区数</li>
<li>work_mode: 指定工作模式，0代表单机版，1代表集群版</li>
<li>backend: 指定后端，0代表EGGROLL， 1代表SPARK加RabbitMQ， 2代表SPARK加Pulsar</li>
</ol>
</blockquote>
<h4 id="上传命令"><a href="#上传命令" class="headerlink" title="上传命令"></a>上传命令</h4><p><strong>每个提供数据的集群（即guest和host）都需执行此步骤</strong></p>
<p>1.使用fate-flow上传数据：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">flow</span> <span class="hljs-string">data upload -c dsl_test/upload_data.json</span><br></code></pre></td></tr></table></figure>

<p>upload_data.json内容：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&#123;</span><br>    <span class="hljs-meta">&quot;file&quot;</span>: <span class="hljs-string">&quot;examples/data/breast_hetero_guest.csv&quot;,</span><br>    <span class="hljs-meta">&quot;head&quot;</span>: <span class="hljs-string">1,</span><br>    <span class="hljs-meta">&quot;partition&quot;</span>: <span class="hljs-string">16,</span><br>    <span class="hljs-meta">&quot;work_mode&quot;</span>: <span class="hljs-string">0,</span><br>    <span class="hljs-meta">&quot;table_name&quot;</span>: <span class="hljs-string">&quot;breast_hetero_guest&quot;,</span><br>    <span class="hljs-meta">&quot;namespace&quot;</span>: <span class="hljs-string">&quot;experiment&quot;</span><br><span class="hljs-attr">&#125;</span><br></code></pre></td></tr></table></figure>

<p>2.使用旧版python脚本上传数据：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">python</span> <span class="hljs-string">/fate/python/fate_flow/fate_flow_client.py -f upload -c /fate/examples/dsl/v1/upload_data.json</span><br></code></pre></td></tr></table></figure>

<p>3.使用python脚本上传数据：参考测试用例1</p>
<h3 id="任务配置与运行配置（DSL-amp-Task-Submit-Runtime-Conf-Setting）V2"><a href="#任务配置与运行配置（DSL-amp-Task-Submit-Runtime-Conf-Setting）V2" class="headerlink" title="任务配置与运行配置（DSL &amp; Task Submit Runtime Conf Setting）V2"></a>任务配置与运行配置（DSL &amp; Task Submit Runtime Conf Setting）V2</h3><p> 为了让任务模型的构建更加灵活，目前 FATE 使用了一套自定的领域特定语言 (DSL) 来描述任务。在 DSL 中，各种模块（例如数据读写 data_io，特征工程 feature-engineering， 回归 regression，分类 classification）可以通向一个有向无环图 （DAG） 组织起来。通过各种方式，用户可以根据自身的需要，<strong>灵活地组合各种算法模块。</strong></p>
<p> 除此之外，每个模块都有不同的参数需要配置，不同的 party 对于同一个模块的参数也可能有所区别。为了简化这种情况，对于每一个模块，FATE 会将<strong>所有 party 的不同参数保存到同一个运行配置文件</strong>（Submit Runtime Conf）中，并且所有的 party 都将共用这个配置文件。这个指南将会告诉你如何创建一个 DSL 配置文件。</p>
<p>V2配置参考：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/doc/dsl_conf_v2_setting_guide_zh.html">https://fate.readthedocs.io/en/latest/_build_temp/doc/dsl_conf_v2_setting_guide_zh.html</a></p>
<h4 id="DSL配置说明"><a href="#DSL配置说明" class="headerlink" title="DSL配置说明"></a>DSL配置说明</h4><h5 id="1-概述"><a href="#1-概述" class="headerlink" title="1.概述"></a>1.概述</h5><p> DSL 的配置文件采用 json 格式，实际上，整个配置文件就是一个 json 对象 （dict）。</p>
<h5 id="2-Components"><a href="#2-Components" class="headerlink" title="2.Components"></a>2.Components</h5><p> 在这个 dict 的第一级是 “components”，用来表示这个任务将会使用到的各个模块，每个独立的模块定义在 “components” 之下，<strong>所有数据需要通过Reader模块从数据存储拿取数据</strong>，注意Reader模块仅有输出<code>output</code></p>
<h5 id="3-module"><a href="#3-module" class="headerlink" title="3.module"></a>3.module</h5><p> 用来指定使用的模块。模块名参考FATE ML算法列表（<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/python/federatedml/README_zh.html%EF%BC%89%EF%BC%8C%E4%B8%8E/fate/python/federatedml/conf/setting_conf">https://fate.readthedocs.io/en/latest/_build_temp/python/federatedml/README_zh.html），与/fate/python/federatedml/conf/setting_conf</a> 下各个模块的文件名保持一致（不包括 .json 后缀）。</p>
<h5 id="4-input"><a href="#4-input" class="headerlink" title="4.input"></a>4.input</h5><p> 分为两种输入类型，分别是 Data和 Model。</p>
<h6 id="Data输入"><a href="#Data输入" class="headerlink" title="Data输入"></a>Data输入</h6><p>分为三种输入类型：</p>
<blockquote>
<ol>
<li>data: 一般被用于 data_io 模块, feature_engineering 模块或者 evaluation 模块</li>
<li>train_data: 一般被用于 homo_lr, hetero_lr 和 secure_boost 模块。如果出现了 train_data 字段，那么这个任务将会被识别为一个 fit 任务</li>
<li>validate_data： 如果存在 train_data 字段，那么该字段是可选的。如果选择保留该字段，则指向的数据将会作为 validation set</li>
<li>test_data: 用作预测数据，如提供，需同时提供model输入。</li>
</ol>
</blockquote>
<h6 id="Model输入"><a href="#Model输入" class="headerlink" title="Model输入"></a>Model输入</h6><p>分为两种输入类型</p>
<blockquote>
<p>1.model: 用于同种类型组件的模型输入。</p>
<p>2.isometric_model: 用于指定继承上游组件的模型输入</p>
</blockquote>
<h5 id="5-output"><a href="#5-output" class="headerlink" title="5.output"></a>5.output</h5><h6 id="数据输出"><a href="#数据输出" class="headerlink" title="数据输出"></a>数据输出</h6><p>分为四种输出类型：</p>
<blockquote>
<ol>
<li>data: 常规模块数据输出</li>
<li>train_data: 仅用于Data Split</li>
<li>validate_data: 仅用于Data Split</li>
<li>test_data： 仅用于Data Split</li>
</ol>
</blockquote>
<h6 id="模型输出"><a href="#模型输出" class="headerlink" title="模型输出"></a>模型输出</h6><p>仅使用model</p>
<h5 id="DSL配置示例"><a href="#DSL配置示例" class="headerlink" title="DSL配置示例"></a>DSL配置示例</h5><p>训练模式，用户可以使用其他算法模块替代HeteroSecureBoost，注意模块名hetero_secureboost_0也要一起更改</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs properties"> <span class="hljs-attr">&#123;</span><br>    <span class="hljs-meta">&quot;components&quot;</span>: <span class="hljs-string">&#123;</span><br>        <span class="hljs-meta">&quot;reader_0&quot;</span>: <span class="hljs-string">&#123;</span><br>            <span class="hljs-meta">&quot;module&quot;</span>: <span class="hljs-string">&quot;Reader&quot;,</span><br>            <span class="hljs-meta">&quot;output&quot;</span>: <span class="hljs-string">&#123;</span><br>                <span class="hljs-meta">&quot;data&quot;</span>: <span class="hljs-string">[</span><br>                    <span class="hljs-attr">&quot;data&quot;</span><br>                <span class="hljs-attr">]</span><br>            <span class="hljs-attr">&#125;</span><br>        <span class="hljs-attr">&#125;,</span><br>        <span class="hljs-meta">&quot;dataio_0&quot;</span>: <span class="hljs-string">&#123;</span><br>            <span class="hljs-meta">&quot;module&quot;</span>: <span class="hljs-string">&quot;DataIO&quot;,</span><br>            <span class="hljs-meta">&quot;input&quot;</span>: <span class="hljs-string">&#123;</span><br>                <span class="hljs-meta">&quot;data&quot;</span>: <span class="hljs-string">&#123;</span><br>                    <span class="hljs-meta">&quot;data&quot;</span>: <span class="hljs-string">[</span><br>                        <span class="hljs-attr">&quot;reader_0.data&quot;</span><br>                    <span class="hljs-attr">]</span><br>                <span class="hljs-attr">&#125;</span><br>            <span class="hljs-attr">&#125;,</span><br>            <span class="hljs-meta">&quot;output&quot;</span>: <span class="hljs-string">&#123;</span><br>                <span class="hljs-meta">&quot;data&quot;</span>: <span class="hljs-string">[</span><br>                    <span class="hljs-attr">&quot;data&quot;</span><br>                <span class="hljs-attr">],</span><br>                <span class="hljs-meta">&quot;model&quot;</span>: <span class="hljs-string">[</span><br>                    <span class="hljs-attr">&quot;model&quot;</span><br>                <span class="hljs-attr">]</span><br>            <span class="hljs-attr">&#125;</span><br>        <span class="hljs-attr">&#125;,</span><br>        <span class="hljs-meta">&quot;intersection_0&quot;</span>: <span class="hljs-string">&#123;</span><br>            <span class="hljs-meta">&quot;module&quot;</span>: <span class="hljs-string">&quot;Intersection&quot;,</span><br>            <span class="hljs-meta">&quot;input&quot;</span>: <span class="hljs-string">&#123;</span><br>                <span class="hljs-meta">&quot;data&quot;</span>: <span class="hljs-string">&#123;</span><br>                    <span class="hljs-meta">&quot;data&quot;</span>: <span class="hljs-string">[</span><br>                        <span class="hljs-attr">&quot;dataio_0.data&quot;</span><br>                    <span class="hljs-attr">]</span><br>                <span class="hljs-attr">&#125;</span><br>            <span class="hljs-attr">&#125;,</span><br>            <span class="hljs-meta">&quot;output&quot;</span>: <span class="hljs-string">&#123;</span><br>                <span class="hljs-meta">&quot;data&quot;</span>: <span class="hljs-string">[</span><br>                    <span class="hljs-attr">&quot;data&quot;</span><br>                <span class="hljs-attr">]</span><br>            <span class="hljs-attr">&#125;</span><br>        <span class="hljs-attr">&#125;,</span><br>        <span class="hljs-meta">&quot;hetero_secureboost_0&quot;</span>: <span class="hljs-string">&#123;</span><br>            <span class="hljs-meta">&quot;module&quot;</span>: <span class="hljs-string">&quot;HeteroSecureBoost&quot;,</span><br>            <span class="hljs-meta">&quot;input&quot;</span>: <span class="hljs-string">&#123;</span><br>                <span class="hljs-meta">&quot;data&quot;</span>: <span class="hljs-string">&#123;</span><br>                    <span class="hljs-meta">&quot;train_data&quot;</span>: <span class="hljs-string">[</span><br>                        <span class="hljs-attr">&quot;intersection_0.data&quot;</span><br>                    <span class="hljs-attr">]</span><br>                <span class="hljs-attr">&#125;</span><br>            <span class="hljs-attr">&#125;,</span><br>            <span class="hljs-meta">&quot;output&quot;</span>: <span class="hljs-string">&#123;</span><br>                <span class="hljs-meta">&quot;data&quot;</span>: <span class="hljs-string">[</span><br>                    <span class="hljs-attr">&quot;data&quot;</span><br>                <span class="hljs-attr">],</span><br>                <span class="hljs-meta">&quot;model&quot;</span>: <span class="hljs-string">[</span><br>                    <span class="hljs-attr">&quot;model&quot;</span><br>                <span class="hljs-attr">]</span><br>            <span class="hljs-attr">&#125;</span><br>        <span class="hljs-attr">&#125;,</span><br>        <span class="hljs-meta">&quot;evaluation_0&quot;</span>: <span class="hljs-string">&#123;</span><br>            <span class="hljs-meta">&quot;module&quot;</span>: <span class="hljs-string">&quot;Evaluation&quot;,</span><br>            <span class="hljs-meta">&quot;input&quot;</span>: <span class="hljs-string">&#123;</span><br>                <span class="hljs-meta">&quot;data&quot;</span>: <span class="hljs-string">&#123;</span><br>                    <span class="hljs-meta">&quot;data&quot;</span>: <span class="hljs-string">[</span><br>                        <span class="hljs-attr">&quot;hetero_secureboost_0.data&quot;</span><br>                    <span class="hljs-attr">]</span><br>                <span class="hljs-attr">&#125;</span><br>            <span class="hljs-attr">&#125;,</span><br>            <span class="hljs-meta">&quot;output&quot;</span>: <span class="hljs-string">&#123;</span><br>                <span class="hljs-meta">&quot;data&quot;</span>: <span class="hljs-string">[</span><br>                    <span class="hljs-attr">&quot;data&quot;</span><br>                <span class="hljs-attr">]</span><br>            <span class="hljs-attr">&#125;</span><br>        <span class="hljs-attr">&#125;</span><br>    <span class="hljs-attr">&#125;</span><br><span class="hljs-attr">&#125;</span><br></code></pre></td></tr></table></figure>

<h3 id="创建配置文件Submit-Runtime-Conf"><a href="#创建配置文件Submit-Runtime-Conf" class="headerlink" title="创建配置文件Submit Runtime Conf"></a>创建配置文件Submit Runtime Conf</h3><p>针对1.5.x版本新格式，<strong>Job Runtime Conf用于设置各个参与方的信息, 作业的参数及各个组件的参数。</strong> 内容包括如下</p>
<h5 id="1-DSL版本"><a href="#1-DSL版本" class="headerlink" title="1. DSL版本"></a>1. DSL版本</h5><p>配置版本，默认不配置为1，建议配置为2</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-string">&quot;dsl_version&quot;</span>: <span class="hljs-string">&quot;2&quot;</span><br></code></pre></td></tr></table></figure>

<h5 id="2-Job-Participants（作业参与方）"><a href="#2-Job-Participants（作业参与方）" class="headerlink" title="2. Job Participants（作业参与方）"></a>2. Job Participants（作业参与方）</h5><p>用户需要定义 initiator。</p>
<p>1.发起方,包括：任务发起方的role和party_id,例如：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-string">&quot;initiator&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;role&quot;</span>: <span class="hljs-string">&quot;guest&quot;</span>,<br>    <span class="hljs-attr">&quot;party_id&quot;</span>: <span class="hljs-number">9999</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>2.所有参与方：包含各参与方信息， 在 role 字段中，每一个元素代表一种角色以及承担这个角色的 party_id。每个角色的 party_id 以列表形式存在，因为一个任务可能涉及到多个 party 担任同一种角色。例如：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-string">&quot;role&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;guest&quot;</span>: [<span class="hljs-number">9999</span>],<br>    <span class="hljs-attr">&quot;host&quot;</span>: [<span class="hljs-number">10000</span>],<br>    <span class="hljs-attr">&quot;arbiter&quot;</span>: [<span class="hljs-number">10000</span>]<br>&#125;<br></code></pre></td></tr></table></figure>

<h5 id="3-algorithm-parameters（系统运行参数）"><a href="#3-algorithm-parameters（系统运行参数）" class="headerlink" title="3.algorithm_parameters（系统运行参数）"></a>3.algorithm_parameters（系统运行参数）</h5><p>配置作业运行时的主要系统参数</p>
<h6 id="参数应用范围策略设置"><a href="#参数应用范围策略设置" class="headerlink" title="参数应用范围策略设置"></a>参数应用范围策略设置</h6><ul>
<li><p>应用于所有参与方，使用common范围标识符</p>
</li>
<li><p>仅应用于某参与方，使用role范围标识符，使用role:party_index定位被指定的参与方，直接指定的参数优先级高于common参数</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-string">&quot;common&quot;</span>: &#123;<br>&#125;<br><br><span class="hljs-string">&quot;role&quot;</span>: &#123;<br>  <span class="hljs-attr">&quot;guest&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;0&quot;</span>: &#123;<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
<p>其中common下的参数应用于所有参与方，role-guest-0配置下的参数应用于guest角色0号下标的参与方 .注意，当前版本系统运行参数未对仅应用于某参与方做严格测试，建议<strong>优先选用common</strong></p>
<h6 id="支持的系统参数"><a href="#支持的系统参数" class="headerlink" title="支持的系统参数"></a>支持的系统参数</h6><table>
<thead>
<tr>
<th>配置项</th>
<th>默认值</th>
<th>支持值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>job_type</td>
<td>train</td>
<td>train, predict</td>
<td>任务类型</td>
</tr>
<tr>
<td>work_mode</td>
<td>0</td>
<td>0, 1</td>
<td>0代表单方单机版，1代表多方分布式版本</td>
</tr>
<tr>
<td>backend</td>
<td>0</td>
<td>0, 1, 2</td>
<td>0代表EGGROLL，1代表SPARK加RabbitMQ，2代表SPARK加Pulsar</td>
</tr>
<tr>
<td>model_id</td>
<td>-</td>
<td>-</td>
<td>模型id，预测任务需要填入</td>
</tr>
<tr>
<td>model_version</td>
<td>-</td>
<td>-</td>
<td>模型version，预测任务需要填入</td>
</tr>
<tr>
<td>task_cores</td>
<td>4</td>
<td>正整数</td>
<td>作业申请的总cpu核数</td>
</tr>
<tr>
<td>task_parallelism</td>
<td>1</td>
<td>正整数</td>
<td>task并行度</td>
</tr>
<tr>
<td>computing_partitions</td>
<td>task所分配到的cpu核数</td>
<td>正整数</td>
<td>计算时数据表的分区数</td>
</tr>
<tr>
<td>eggroll_run</td>
<td>无</td>
<td>processors_per_node等</td>
<td>eggroll计算引擎相关配置参数，一般无须配置，由task_cores自动计算得到，若配置则task_cores参数不生效</td>
</tr>
<tr>
<td>spark_run</td>
<td>无</td>
<td>num-executors, executor-cores等</td>
<td>spark计算引擎相关配置参数，一般无须配置，由task_cores自动计算得到，若配置则task_cores参数不生效</td>
</tr>
<tr>
<td>rabbitmq_run</td>
<td>无</td>
<td>queue, exchange等</td>
<td>rabbitmq创建queue、exchange的相关配置参数，一般无须配置，采取系统默认值</td>
</tr>
<tr>
<td>pulsar_run</td>
<td>无</td>
<td>producer, consumer等</td>
<td>pulsar创建producer和consumer时候的相关配置，一般无需配置。</td>
</tr>
<tr>
<td>federated_status_collect_type</td>
<td>PUSH</td>
<td>PUSH, PULL</td>
<td>多方运行状态收集模式，PUSH表示每个参与方主动上报到发起方，PULL表示发起方定期向各个参与方拉取</td>
</tr>
<tr>
<td>timeout</td>
<td>259200 (3天)</td>
<td>正整数</td>
<td>任务超时时间,单位秒</td>
</tr>
</tbody></table>
<ol>
<li>三大类引擎具有一定的支持依赖关系，例如Spark计算引擎当前仅支持使用HDFS作为中间数据存储引擎</li>
<li>work_mode + backend会自动依据支持依赖关系，产生对应的三大引擎配置computing、storage、federation</li>
<li>开发者可自行实现适配的引擎，并在runtime config配置引擎</li>
</ol>
<h6 id="未开放的参数"><a href="#未开放的参数" class="headerlink" title="未开放的参数"></a>未开放的参数</h6><p>参考：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/doc/dsl_conf_v2_setting_guide_zh.html#id17">https://fate.readthedocs.io/en/latest/_build_temp/doc/dsl_conf_v2_setting_guide_zh.html#id17</a></p>
<h6 id="参考配置"><a href="#参考配置" class="headerlink" title="参考配置"></a>参考配置</h6><p>共有四种</p>
<ol>
<li><p>使用eggroll作为backend，采取默认cpu分配计算策略时的配置</p>
</li>
<li><p>使用eggroll作为backend，采取直接指定cpu等参数时的配置</p>
</li>
<li><p>使用spark加rabbitMQ作为backend，采取直接指定cpu等参数时的配置</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-string">&quot;job_parameters&quot;</span>: &#123;<br>  <span class="hljs-attr">&quot;common&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;job_type&quot;</span>: <span class="hljs-string">&quot;train&quot;</span>,<br>    <span class="hljs-attr">&quot;work_mode&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">&quot;backend&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">&quot;spark_run&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;num-executors&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;executor-cores&quot;</span>: <span class="hljs-number">2</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;task_parallelism&quot;</span>: <span class="hljs-number">2</span>,<br>    <span class="hljs-attr">&quot;computing_partitions&quot;</span>: <span class="hljs-number">8</span>,<br>    <span class="hljs-attr">&quot;timeout&quot;</span>: <span class="hljs-number">36000</span>,<br>    <span class="hljs-attr">&quot;rabbitmq_run&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;queue&quot;</span>: &#123;<br>        <span class="hljs-attr">&quot;durable&quot;</span>: <span class="hljs-literal">true</span><br>      &#125;,<br>      <span class="hljs-attr">&quot;connection&quot;</span>: &#123;<br>        <span class="hljs-attr">&quot;heartbeat&quot;</span>: <span class="hljs-number">10000</span><br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
<li><p>使用spark加pulsar作为backend</p>
</li>
</ol>
<p>详情，参考<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/doc/dsl_conf_v2_setting_guide_zh.html">https://fate.readthedocs.io/en/latest/_build_temp/doc/dsl_conf_v2_setting_guide_zh.html</a></p>
<h6 id="资源管理详细说明"><a href="#资源管理详细说明" class="headerlink" title="资源管理详细说明"></a>资源管理详细说明</h6><p> 1.5.0版本开始，为了进一步管理资源，fateflow启用更细粒度的cpu cores管理策略，去除早前版本直接通过限制同时运行作业个数的策略。</p>
<p>包括：总资源配置、运行资源计算、资源调度，详情参考：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/doc/dsl_conf_v2_setting_guide_zh.html#id19">https://fate.readthedocs.io/en/latest/_build_temp/doc/dsl_conf_v2_setting_guide_zh.html#id19</a></p>
<h5 id="4-组件运行参数"><a href="#4-组件运行参数" class="headerlink" title="4. 组件运行参数"></a>4. 组件运行参数</h5><p>详情参考：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/doc/dsl_conf_v2_setting_guide_zh.html#id23">https://fate.readthedocs.io/en/latest/_build_temp/doc/dsl_conf_v2_setting_guide_zh.html#id23</a></p>
<h6 id="参数应用范围策略设置-1"><a href="#参数应用范围策略设置-1" class="headerlink" title="参数应用范围策略设置"></a>参数应用范围策略设置</h6><ul>
<li>应用于所有参与方，使用common范围标识符</li>
<li>仅应用于某参与方，使用role范围标识符，使用role:party_index定位被指定的参与方，直接指定的参数优先级高于common参数</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-string">&quot;commom&quot;</span>: &#123;<br>&#125;<br><br><span class="hljs-string">&quot;role&quot;</span>: &#123;<br>  <span class="hljs-attr">&quot;guest&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;0&quot;</span>: &#123;<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>其中common配置下的参数应用于所有参与方，role-guest-0配置下的参数表示应用于guest角色0号下标的参与方 注意，当前版本组件运行参数已支持两种应用范围策略</p>
<h6 id="参考配置-1"><a href="#参考配置-1" class="headerlink" title="参考配置"></a>参考配置</h6><ul>
<li><code>intersection_0</code>与<code>hetero_lr_0</code>两个组件的运行参数，放在common范围下，应用于所有参与方</li>
<li>对于<code>reader_0</code>与<code>dataio_0</code>两个组件的运行参数，依据不同的参与方进行特定配置，这是因为通常不同参与方的输入参数并不一致，所有通常这两个组件一般按参与方设置</li>
</ul>
<p>上述组件名称是在DSL配置文件中定义</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-string">&quot;component_parameters&quot;</span>: &#123;<br>  <span class="hljs-attr">&quot;common&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;intersection_0&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;intersect_method&quot;</span>: <span class="hljs-string">&quot;raw&quot;</span>,<br>      <span class="hljs-attr">&quot;sync_intersect_ids&quot;</span>: <span class="hljs-literal">true</span>,<br>      <span class="hljs-attr">&quot;only_output_key&quot;</span>: <span class="hljs-literal">false</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;hetero_lr_0&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;penalty&quot;</span>: <span class="hljs-string">&quot;L2&quot;</span>,<br>      <span class="hljs-attr">&quot;optimizer&quot;</span>: <span class="hljs-string">&quot;rmsprop&quot;</span>,<br>      <span class="hljs-attr">&quot;alpha&quot;</span>: <span class="hljs-number">0.01</span>,<br>      <span class="hljs-attr">&quot;max_iter&quot;</span>: <span class="hljs-number">3</span>,<br>      <span class="hljs-attr">&quot;batch_size&quot;</span>: <span class="hljs-number">320</span>,<br>      <span class="hljs-attr">&quot;learning_rate&quot;</span>: <span class="hljs-number">0.15</span>,<br>      <span class="hljs-attr">&quot;init_param&quot;</span>: &#123;<br>        <span class="hljs-attr">&quot;init_method&quot;</span>: <span class="hljs-string">&quot;random_uniform&quot;</span><br>      &#125;<br>    &#125;<br>  &#125;,<br>  <span class="hljs-attr">&quot;role&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;guest&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;0&quot;</span>: &#123;<br>        <span class="hljs-attr">&quot;reader_0&quot;</span>: &#123;<br>          <span class="hljs-attr">&quot;table&quot;</span>: &#123;<span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;breast_hetero_guest&quot;</span>, <span class="hljs-attr">&quot;namespace&quot;</span>: <span class="hljs-string">&quot;experiment&quot;</span>&#125;<br>        &#125;,<br>        <span class="hljs-attr">&quot;dataio_0&quot;</span>:&#123;<br>          <span class="hljs-attr">&quot;with_label&quot;</span>: <span class="hljs-literal">true</span>,<br>          <span class="hljs-attr">&quot;label_name&quot;</span>: <span class="hljs-string">&quot;y&quot;</span>,<br>          <span class="hljs-attr">&quot;label_type&quot;</span>: <span class="hljs-string">&quot;int&quot;</span>,<br>          <span class="hljs-attr">&quot;output_format&quot;</span>: <span class="hljs-string">&quot;dense&quot;</span><br>        &#125;<br>      &#125;<br>    &#125;,<br>    <span class="hljs-attr">&quot;host&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;0&quot;</span>: &#123;<br>        <span class="hljs-attr">&quot;reader_0&quot;</span>: &#123;<br>          <span class="hljs-attr">&quot;table&quot;</span>: &#123;<span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;breast_hetero_host&quot;</span>, <span class="hljs-attr">&quot;namespace&quot;</span>: <span class="hljs-string">&quot;experiment&quot;</span>&#125;<br>        &#125;,<br>        <span class="hljs-attr">&quot;dataio_0&quot;</span>:&#123;<br>          <span class="hljs-attr">&quot;with_label&quot;</span>: <span class="hljs-literal">false</span>,<br>          <span class="hljs-attr">&quot;output_format&quot;</span>: <span class="hljs-string">&quot;dense&quot;</span><br>        &#125;<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h6 id="多Host-配置"><a href="#多Host-配置" class="headerlink" title="多Host 配置"></a>多Host 配置</h6><p>包括多Host任务应在role下列举所有host信息、各host不同的配置应在各自对应模块下分别列举，详情参考：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/doc/dsl_conf_v2_setting_guide_zh.html#host">https://fate.readthedocs.io/en/latest/_build_temp/doc/dsl_conf_v2_setting_guide_zh.html#host</a></p>
<h6 id="预测任务配置"><a href="#预测任务配置" class="headerlink" title="预测任务配置"></a>预测任务配置</h6><p><strong>DSL V2不会自动为训练任务生成预测dsl</strong>。 用户需要首先使用<code>Flow Client</code>部署所需模型中模块。 详细命令说明请参考<code>FATE-Flow document &lt;/fate/python/fate_client/flow_client/README_zh.rst 的deploy模块&gt;</code></p>
<p>命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">flow model deploy <br>--model-id <span class="hljs-variable">$model_id</span> <span class="hljs-comment">#模型ID 必填</span><br>--model-version <span class="hljs-variable">$model_version</span> <span class="hljs-comment">#模型版本 必填</span><br><span class="hljs-comment"># --cpn-list ... 组件列表，非必要参数</span><br></code></pre></td></tr></table></figure>

<h5 id="5-FATE-FLOW运行job基本原理"><a href="#5-FATE-FLOW运行job基本原理" class="headerlink" title="5.FATE-FLOW运行job基本原理"></a>5.FATE-FLOW运行job基本原理</h5><ol>
<li>提交作业后，fateflow获取job dsl与job config，存于数据库<code>t_job</code>表对应字段以及/fate/jobs/$jobid/目录,</li>
<li>解析job dsl与job config，依据合并参数生成细粒度参数(如上述所说的backend&amp;work_mode对应会生成三个引擎参数), 以及处理参数默认值</li>
<li>将共同配置分发到各参与方并存储，依据参与方的实际信息，生成<strong>job_runtime_on_party_conf</strong></li>
<li>每个参与方接收到任务时，均依据<strong>job_runtime_on_party_conf</strong>执行</li>
</ol>
<p>$jobid目录包括文件：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-meta">job_dsl.json</span>  <span class="hljs-string">job_runtime_conf.json  local  pipeline_dsl.json  train_runtime_conf.json</span><br></code></pre></td></tr></table></figure>

<h4 id="Submit-Runtime-Conf配置示例"><a href="#Submit-Runtime-Conf配置示例" class="headerlink" title="Submit Runtime Conf配置示例"></a>Submit Runtime Conf配置示例</h4><p>训练、验证模型 dsl样例</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&#123;</span><br>    <span class="hljs-meta">&quot;dsl_version&quot;</span>: <span class="hljs-string">2,</span><br>    <span class="hljs-meta">&quot;initiator&quot;</span>: <span class="hljs-string">&#123;</span><br>        <span class="hljs-meta">&quot;role&quot;</span>: <span class="hljs-string">&quot;guest&quot;,</span><br>        <span class="hljs-meta">&quot;party_id&quot;</span>: <span class="hljs-string">9999</span><br>    <span class="hljs-attr">&#125;,</span><br>    <span class="hljs-meta">&quot;role&quot;</span>: <span class="hljs-string">&#123;</span><br>        <span class="hljs-meta">&quot;host&quot;</span>: <span class="hljs-string">[</span><br>            <span class="hljs-attr">10000</span><br>        <span class="hljs-attr">],</span><br>        <span class="hljs-meta">&quot;guest&quot;</span>: <span class="hljs-string">[</span><br>            <span class="hljs-attr">9999</span><br>        <span class="hljs-attr">]</span><br>    <span class="hljs-attr">&#125;,</span><br>    <span class="hljs-meta">&quot;job_parameters&quot;</span>: <span class="hljs-string">&#123;</span><br>        <span class="hljs-meta">&quot;job_type&quot;</span>: <span class="hljs-string">&quot;train&quot;,</span><br>        <span class="hljs-meta">&quot;work_mode&quot;</span>: <span class="hljs-string">0,</span><br>        <span class="hljs-meta">&quot;backend&quot;</span>: <span class="hljs-string">0,</span><br>        <span class="hljs-meta">&quot;computing_engine&quot;</span>: <span class="hljs-string">&quot;STANDALONE&quot;,</span><br>        <span class="hljs-meta">&quot;federation_engine&quot;</span>: <span class="hljs-string">&quot;STANDALONE&quot;,</span><br>        <span class="hljs-meta">&quot;storage_engine&quot;</span>: <span class="hljs-string">&quot;STANDALONE&quot;,</span><br>        <span class="hljs-meta">&quot;engines_address&quot;</span>: <span class="hljs-string">&#123;</span><br>            <span class="hljs-meta">&quot;computing&quot;</span>: <span class="hljs-string">&#123;</span><br>                <span class="hljs-meta">&quot;nodes&quot;</span>: <span class="hljs-string">1,</span><br>                <span class="hljs-meta">&quot;cores_per_node&quot;</span>: <span class="hljs-string">20</span><br>            <span class="hljs-attr">&#125;,</span><br>            <span class="hljs-meta">&quot;federation&quot;</span>: <span class="hljs-string">&#123;</span><br>                <span class="hljs-meta">&quot;nodes&quot;</span>: <span class="hljs-string">1,</span><br>                <span class="hljs-meta">&quot;cores_per_node&quot;</span>: <span class="hljs-string">20</span><br>            <span class="hljs-attr">&#125;,</span><br>            <span class="hljs-meta">&quot;storage&quot;</span>: <span class="hljs-string">&#123;</span><br>                <span class="hljs-meta">&quot;nodes&quot;</span>: <span class="hljs-string">1,</span><br>                <span class="hljs-meta">&quot;cores_per_node&quot;</span>: <span class="hljs-string">20</span><br>            <span class="hljs-attr">&#125;</span><br>        <span class="hljs-attr">&#125;,</span><br>        <span class="hljs-meta">&quot;federated_mode&quot;</span>: <span class="hljs-string">&quot;SINGLE&quot;,</span><br>        <span class="hljs-meta">&quot;task_parallelism&quot;</span>: <span class="hljs-string">1,</span><br>        <span class="hljs-meta">&quot;computing_partitions&quot;</span>: <span class="hljs-string">4,</span><br>        <span class="hljs-meta">&quot;federated_status_collect_type&quot;</span>: <span class="hljs-string">&quot;PULL&quot;,</span><br>        <span class="hljs-meta">&quot;model_id&quot;</span>: <span class="hljs-string">&quot;guest-9999#host-10000#model&quot;,</span><br>        <span class="hljs-meta">&quot;model_version&quot;</span>: <span class="hljs-string">&quot;202108310831349550536&quot;,</span><br>        <span class="hljs-meta">&quot;eggroll_run&quot;</span>: <span class="hljs-string">&#123;</span><br>            <span class="hljs-meta">&quot;eggroll.session.processors.per.node&quot;</span>: <span class="hljs-string">4</span><br>        <span class="hljs-attr">&#125;,</span><br>        <span class="hljs-meta">&quot;spark_run&quot;</span>: <span class="hljs-string">&#123;&#125;,</span><br>        <span class="hljs-meta">&quot;rabbitmq_run&quot;</span>: <span class="hljs-string">&#123;&#125;,</span><br>        <span class="hljs-meta">&quot;pulsar_run&quot;</span>: <span class="hljs-string">&#123;&#125;,</span><br>        <span class="hljs-meta">&quot;adaptation_parameters&quot;</span>: <span class="hljs-string">&#123;</span><br>            <span class="hljs-meta">&quot;task_nodes&quot;</span>: <span class="hljs-string">1,</span><br>            <span class="hljs-meta">&quot;task_cores_per_node&quot;</span>: <span class="hljs-string">4,</span><br>            <span class="hljs-meta">&quot;task_memory_per_node&quot;</span>: <span class="hljs-string">0,</span><br>            <span class="hljs-meta">&quot;request_task_cores&quot;</span>: <span class="hljs-string">4,</span><br>            <span class="hljs-meta">&quot;if_initiator_baseline&quot;</span>: <span class="hljs-string">false</span><br>        <span class="hljs-attr">&#125;</span><br>    <span class="hljs-attr">&#125;,</span><br>    <span class="hljs-meta">&quot;component_parameters&quot;</span>: <span class="hljs-string">&#123;</span><br>        <span class="hljs-meta">&quot;role&quot;</span>: <span class="hljs-string">&#123;</span><br>            <span class="hljs-meta">&quot;guest&quot;</span>: <span class="hljs-string">&#123;</span><br>                <span class="hljs-meta">&quot;0&quot;</span>: <span class="hljs-string">&#123;</span><br>                    <span class="hljs-meta">&quot;reader_0&quot;</span>: <span class="hljs-string">&#123;</span><br>                        <span class="hljs-meta">&quot;table&quot;</span>: <span class="hljs-string">&#123;</span><br>                            <span class="hljs-meta">&quot;name&quot;</span>: <span class="hljs-string">&quot;breast_hetero_guest&quot;,</span><br>                            <span class="hljs-meta">&quot;namespace&quot;</span>: <span class="hljs-string">&quot;experiment&quot;</span><br>                        <span class="hljs-attr">&#125;</span><br>                    <span class="hljs-attr">&#125;</span><br>                <span class="hljs-attr">&#125;</span><br>            <span class="hljs-attr">&#125;,</span><br>            <span class="hljs-meta">&quot;host&quot;</span>: <span class="hljs-string">&#123;</span><br>                <span class="hljs-meta">&quot;0&quot;</span>: <span class="hljs-string">&#123;</span><br>                    <span class="hljs-meta">&quot;reader_0&quot;</span>: <span class="hljs-string">&#123;</span><br>                        <span class="hljs-meta">&quot;table&quot;</span>: <span class="hljs-string">&#123;</span><br>                            <span class="hljs-meta">&quot;name&quot;</span>: <span class="hljs-string">&quot;breast_hetero_host&quot;,</span><br>                            <span class="hljs-meta">&quot;namespace&quot;</span>: <span class="hljs-string">&quot;experiment&quot;</span><br>                        <span class="hljs-attr">&#125;</span><br>                    <span class="hljs-attr">&#125;,</span><br>                    <span class="hljs-meta">&quot;dataio_0&quot;</span>: <span class="hljs-string">&#123;</span><br>                        <span class="hljs-meta">&quot;with_label&quot;</span>: <span class="hljs-string">false</span><br>                    <span class="hljs-attr">&#125;</span><br>                <span class="hljs-attr">&#125;</span><br>            <span class="hljs-attr">&#125;</span><br>        <span class="hljs-attr">&#125;,</span><br>        <span class="hljs-meta">&quot;common&quot;</span>: <span class="hljs-string">&#123;</span><br>            <span class="hljs-meta">&quot;dataio_0&quot;</span>: <span class="hljs-string">&#123;</span><br>                <span class="hljs-meta">&quot;with_label&quot;</span>: <span class="hljs-string">true</span><br>            <span class="hljs-attr">&#125;,</span><br>            <span class="hljs-meta">&quot;hetero_secureboost_0&quot;</span>: <span class="hljs-string">&#123;</span><br>                <span class="hljs-meta">&quot;task_type&quot;</span>: <span class="hljs-string">&quot;classification&quot;,</span><br>                <span class="hljs-meta">&quot;objective_param&quot;</span>: <span class="hljs-string">&#123;</span><br>                    <span class="hljs-meta">&quot;objective&quot;</span>: <span class="hljs-string">&quot;cross_entropy&quot;</span><br>                <span class="hljs-attr">&#125;,</span><br>                <span class="hljs-meta">&quot;num_trees&quot;</span>: <span class="hljs-string">5,</span><br>                <span class="hljs-meta">&quot;bin_num&quot;</span>: <span class="hljs-string">16,</span><br>                <span class="hljs-meta">&quot;encrypt_param&quot;</span>: <span class="hljs-string">&#123;</span><br>                    <span class="hljs-meta">&quot;method&quot;</span>: <span class="hljs-string">&quot;iterativeAffine&quot;</span><br>                <span class="hljs-attr">&#125;,</span><br>                <span class="hljs-meta">&quot;tree_param&quot;</span>: <span class="hljs-string">&#123;</span><br>                    <span class="hljs-meta">&quot;max_depth&quot;</span>: <span class="hljs-string">3</span><br>                <span class="hljs-attr">&#125;</span><br>            <span class="hljs-attr">&#125;,</span><br>            <span class="hljs-meta">&quot;evaluation_0&quot;</span>: <span class="hljs-string">&#123;</span><br>                <span class="hljs-meta">&quot;eval_type&quot;</span>: <span class="hljs-string">&quot;binary&quot;</span><br>            <span class="hljs-attr">&#125;</span><br>        <span class="hljs-attr">&#125;</span><br>    <span class="hljs-attr">&#125;</span><br><span class="hljs-attr">&#125;</span><br></code></pre></td></tr></table></figure>

<h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><h3 id="FATE-ML"><a href="#FATE-ML" class="headerlink" title="FATE ML"></a>FATE ML</h3><p>FATE目前支持三种类型联邦学习算法：横向联邦学习、纵向联邦学习以及迁移学习。</p>
<ul>
<li>横向联邦学习:在两个数据集的用户特征重叠较多而用户重叠较少的情况下</li>
<li>纵向联邦学习:在两个数据集的用户重叠较多而用户特征重叠较少的情况下</li>
<li>联邦迁移学习:在两个数据集的用户与用户特征重叠都较少的情况下，不对数据进行切分，而可以利用迁移学习来克服数据或标签不足的情况</li>
</ul>
<p>参考：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/python/federatedml/README_zh.html">https://fate.readthedocs.io/en/latest/_build_temp/python/federatedml/README_zh.html</a></p>
<p>FederatedML 在联邦学习上实现许多常见的机器学习算法。所有模块均采用解耦模块化方法开发，以增强可扩展性。FederatedML 提供：</p>
<ol>
<li>联合统计：PSI、Union（并集计算）、Pearson Correlation（皮尔逊系数） 等。</li>
<li>联合特征工程：包括联邦采样，联邦特征分箱，联邦特征选择等。</li>
<li>联合机器学习算法：包括横向和纵向的联邦LR, GBDT， DNN，迁移学习等。</li>
<li>模型评估：提供对二分类，多分类，回归评估，聚类评估，联邦和单边对比评估。</li>
<li>安全协议：提供了多种安全协议，以进行更安全的多方交互计算。</li>
</ol>
<p>联邦机器学习框架：参考<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/python/federatedml/README_zh.html#id4">https://fate.readthedocs.io/en/latest/_build_temp/python/federatedml/README_zh.html#id4</a></p>
<h4 id="算法清单"><a href="#算法清单" class="headerlink" title="算法清单"></a>算法清单</h4><p>测试用例会用到的算法列表：</p>
<table>
<thead>
<tr>
<th>算法</th>
<th>模块名</th>
<th>描述</th>
<th>数据输入</th>
<th>数据输出</th>
<th>模型输入</th>
<th>模型输出</th>
</tr>
</thead>
<tbody><tr>
<td>Reader</td>
<td>Reader</td>
<td>当输入数据的存储引擎当前计算引擎不支持时，会自动转存到FATE集群适配计算引擎的组件输出存储引擎；当输入数据的存储格式非FATE支持存储格式时，会自动转换格式，并存储到FATE集群的组件输出存储引擎</td>
<td>用户原始存储数据</td>
<td>转换后原始数据</td>
<td></td>
<td></td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/python/federatedml/util/README.html">DataIO</a></td>
<td>DataIO</td>
<td>该组件将原始数据转换为Instance对象(FATE-v1.7后会逐步弃用，使用DataTransform)。</td>
<td>Table，值为原始数据</td>
<td>转换后的数据表，值为在 : federatedml/feature/instance.py 中定义的Data Instance的实例</td>
<td></td>
<td>DataIO模型</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/python/federatedml/README_zh.html#id6"><code>DataTransform</code>_</a></td>
<td>DataTransform</td>
<td>该组件将原始数据转换为Instance对象。</td>
<td>Table，值为原始数据</td>
<td>转换后的数据表，值为在 : federatedml/feature/instance.py 中定义的Data Instance的实例</td>
<td></td>
<td>DataTransform模型</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/python/federatedml/statistic/intersect/README.html">Intersect</a></td>
<td>Intersection</td>
<td>计算两方的相交数据集，而不会泄漏任何差异数据集的信息。主要用于纵向任务。</td>
<td>Table</td>
<td>两方Table中相交的部分</td>
<td></td>
<td>Intersect模型</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/python/federatedml/ensemble/README.html">Hetero Secure Boosting</a></td>
<td>HeteroSecureBoost</td>
<td>通过多方构建纵向Secure Boost模块。</td>
<td>Table，值为Instance</td>
<td></td>
<td></td>
<td>SecureBoost模型，由模型本身和模型参数组成</td>
</tr>
</tbody></table>
<p>详细算法清单见：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/python/federatedml/README_zh.html#id2">https://fate.readthedocs.io/en/latest/_build_temp/python/federatedml/README_zh.html#id2</a></p>
<h4 id="安全协议"><a href="#安全协议" class="headerlink" title="安全协议"></a>安全协议</h4><p>参考：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/python/federatedml/README_zh.html#id3">https://fate.readthedocs.io/en/latest/_build_temp/python/federatedml/README_zh.html#id3</a></p>
<h4 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h4><p>参考：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/python/federatedml/README_zh.html#module-federatedml.param">https://fate.readthedocs.io/en/latest/_build_temp/python/federatedml/README_zh.html#module-federatedml.param</a></p>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>详情见：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/examples/README.html">https://fate.readthedocs.io/en/latest/_build_temp/examples/README.html</a></p>
<h3 id="示例使用指南"><a href="#示例使用指南" class="headerlink" title="示例使用指南"></a>示例使用指南</h3><p>即本文档的测试用例2，3</p>
<h2 id="FATE-FLOW"><a href="#FATE-FLOW" class="headerlink" title="FATE-FLOW"></a>FATE-FLOW</h2><p>参考：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/python/fate_flow/README_zh.html">https://fate.readthedocs.io/en/latest/_build_temp/python/fate_flow/README_zh.html</a></p>
<p>FATE-Flow是联邦学习框架FATE的作业调度系统，实现联邦学习作业生命周期的完整管理，其中包括数据输入、训练作业调度、指标追踪、模型中心等功能.</p>
<h3 id="FATE-Flow关键点"><a href="#FATE-Flow关键点" class="headerlink" title="FATE-Flow关键点"></a>FATE-Flow关键点</h3><ul>
<li>使用DAG定义Pipeline；</li>
<li>使用 JSON 格式的 FATE-DSL 描述DAG, 支持系统自动化对接；</li>
<li>先进的调度框架，基于全局状态和乐观锁调度，单方DAG调度，多方协调调度，并支持多调度器</li>
<li>灵活的调度策略，支持启动/停止/重跑等</li>
<li>细粒度的资源调度能力，依据不同计算引擎支持核数、内存、工作节点策略</li>
<li>实时追踪器，运行期间实时跟踪数据, 参数, 模型和指标</li>
<li>联邦模型中心, 模型管理、联邦一致性、导入导出、集群间迁移</li>
<li>提供CLI、HTTP API、Python SDK</li>
</ul>
<h3 id="架构"><a href="#架构" class="headerlink" title="架构"></a>架构</h3><p>参考：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/python/fate_flow/README_zh.html#id3">https://fate.readthedocs.io/en/latest/_build_temp/python/fate_flow/README_zh.html#id3</a></p>
<h3 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h3><p>参考：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/python/fate_flow/README_zh.html#id4">https://fate.readthedocs.io/en/latest/_build_temp/python/fate_flow/README_zh.html#id4</a></p>
<h3 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h3><h4 id="FATE-Flow-Client命令行"><a href="#FATE-Flow-Client命令行" class="headerlink" title="FATE-Flow Client命令行"></a>FATE-Flow Client命令行</h4><p>参考：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/python/fate_client/flow_client/README_zh.html">https://fate.readthedocs.io/en/latest/_build_temp/python/fate_client/flow_client/README_zh.html</a></p>
<p>在新版的FATE Flow命令行控制台中，将命令拆分成了多个类，包括 <em>job</em>, <em>data</em>, <em>model</em>, <em>component</em> 等等。所有的命令将有一个共有调用入口</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs awk">[IN]<br>flow<br><br>[OUT]<br>Usage: flow [OPTIONS] COMMAND [ARGS]...<br><br>  Fate Flow Client<br><br>Options:<br>  -h, --help  Show this message and <span class="hljs-keyword">exit</span>.<br><br>Commands:<br>  component   Component Operations<br>  data        Data Operations<br>  job         Job Operations<br>  model       Model Operations<br>  queue       Queue Operations<br>  table       Table Operations<br>  task        Task Operations<br><span class="hljs-number">12345678910111213141516171819</span><br></code></pre></td></tr></table></figure>

<p>FATE-Flow 命令行接口参考：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/python/fate_flow/doc/fate_flow_cli.html">https://fate.readthedocs.io/en/latest/_build_temp/python/fate_flow/doc/fate_flow_cli.html</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">python fate_flow_client.py -f <span class="hljs-variable">$command</span><br><span class="hljs-comment"># </span><br><br><span class="hljs-comment">#cd /fate/python/fate_flow/</span><br><span class="hljs-comment">#python fate_flow_client.py -f submit_job -c /fate/python/fate_flow/examples/test_hetero_lr_job_conf.json -d /fate/python/fate_flow/examples/test_hetero_lr_job_dsl.json</span><br></code></pre></td></tr></table></figure>

<h4 id="FATE-Flow-Client-SDK指南"><a href="#FATE-Flow-Client-SDK指南" class="headerlink" title="FATE-Flow Client SDK指南"></a>FATE-Flow Client SDK指南</h4><p>详情参考：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/python/fate_client/flow_sdk/README_zh.html">https://fate.readthedocs.io/en/latest/_build_temp/python/fate_client/flow_sdk/README_zh.html</a></p>
<p>包含</p>
<ul>
<li>Job 操作</li>
<li>Component 操作</li>
<li>Data操作</li>
<li>Task操作</li>
<li>Model 操作</li>
<li>Tag 操作</li>
<li>Table 操作</li>
<li>Queue 操作</li>
</ul>
<p>用法类似：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flow_sdk.client <span class="hljs-keyword">import</span> FlowClient<br><span class="hljs-comment"># use real ip address to initialize SDK</span><br>client = FlowClient(<span class="hljs-string">&#x27;127.0.0.1&#x27;</span>, <span class="hljs-number">9000</span>, <span class="hljs-string">&#x27;v1&#x27;</span>)<br> <br><span class="hljs-comment">#client.job.submit(conf_path, dsl_path)</span><br></code></pre></td></tr></table></figure>

<h4 id="FATE-Flow-REST-API"><a href="#FATE-Flow-REST-API" class="headerlink" title="FATE-Flow REST API"></a>FATE-Flow REST API</h4><p>参考：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/python/fate_flow/doc/fate_flow_http_api.html">https://fate.readthedocs.io/en/latest/_build_temp/python/fate_flow/doc/fate_flow_http_api.html</a></p>
<h4 id="FATE模型发布及在线联邦推理指南"><a href="#FATE模型发布及在线联邦推理指南" class="headerlink" title="FATE模型发布及在线联邦推理指南"></a>FATE模型发布及在线联邦推理指南</h4><p>参考：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/doc/model_publish_with_serving_guide_zh.html">https://fate.readthedocs.io/en/latest/_build_temp/doc/model_publish_with_serving_guide_zh.html</a></p>
<h3 id="FATE-Pipeline使用"><a href="#FATE-Pipeline使用" class="headerlink" title="FATE Pipeline使用"></a>FATE Pipeline使用</h3><p>Pipeline介绍参考：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/python/fate_client/pipeline/README.html">https://fate.readthedocs.io/en/latest/_build_temp/python/fate_client/pipeline/README.html</a></p>
<p> Pipeline 是一个高级 Python API，允许用户以顺序方式设计、启动和查询 FATE 作业。FATE Pipeline 设计为用户友好且与 FATE 命令行工具的行为一致。用户可以通过向管道添加组件来自定义作业工作流，然后通过一次调用启动作业。此外，Pipeline 提供了在拟合管道后运行预测和查询信息的功能。</p>
<h4 id="一个FATE-Job-是一个有向无环图"><a href="#一个FATE-Job-是一个有向无环图" class="headerlink" title="一个FATE Job 是一个有向无环图"></a>一个FATE Job 是一个有向无环图</h4><p> FATE 作业是由算法组件节点组成的 dag。FATE 管道提供易于使用的工具来配置任务的顺序和设置。</p>
<p> FATE 以模块化风格编写。模块被设计为具有输入和输出数据和模型。因此，当一个模块的输出设置为另一个模块的输入时，两个模块连接在一起。通过跟踪一个数据集是如何通过 FATE 模块处理的，可以看到一个 FATE 作业实际上是由一系列子任务组成的。</p>
<h4 id="pipeline接口"><a href="#pipeline接口" class="headerlink" title="pipeline接口"></a>pipeline接口</h4><p>参考：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/python/fate_client/pipeline/README.html#interface-of-pipeline">https://fate.readthedocs.io/en/latest/_build_temp/python/fate_client/pipeline/README.html#interface-of-pipeline</a></p>
<h5 id="Component"><a href="#Component" class="headerlink" title="Component"></a>Component</h5><p>FATE 模块被封装<code>component</code>在 Pipeline API 中。每个组件都可以接收和输出<code>Data</code>和<code>Model</code>。组件的参数可以在初始化时方便的设置。未指定的参数将采用默认值。所有组件都有一个 <code>name</code>，可以任意设置。组件的名称是它的标识符，因此它在Pipeline 必须是唯一的。我们建议每个组件名称都包含一个编号作为后缀，以便于跟踪。</p>
<p>每个组件都可能具有输入和/或输出<code>Data</code>和/或<code>Model</code>。有关如何使用组件的详细信息，请参阅本 <a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/python/fate_client/pipeline/component/README.html">指南</a>。</p>
<p>使用指定参数值初始化组件的示例：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">hetero_lr_0 = HeteroLR(<span class="hljs-attribute">name</span>=<span class="hljs-string">&quot;hetero_lr_0&quot;</span>, <span class="hljs-attribute">early_stop</span>=<span class="hljs-string">&quot;weight_diff&quot;</span>, <span class="hljs-attribute">max_iter</span>=10,<br>                       <span class="hljs-attribute">early_stopping_rounds</span>=2, <span class="hljs-attribute">validation_freqs</span>=2)<br>12<br></code></pre></td></tr></table></figure>

<h5 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h5><p><a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/python/fate_client/pipeline/component/README.html">Input</a>封装了一个组件的所有输入，包括 <code>Data</code>和<code>Model</code>输入。要访问<code>input</code>组件，请引用其<code>input</code>属性：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">input_all</span> = <span class="hljs-string">dataio_0.input</span><br></code></pre></td></tr></table></figure>

<h5 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h5><p><a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/python/fate_client/pipeline/component/README.html">输出</a>封装的部件，其中包括的所有输出结果 <code>Data</code>，并<code>Model</code>输出。要从<code>Output</code>组件访问，请引用其<code>output</code>属性：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">output_all</span> = <span class="hljs-string">dataio_0.output</span><br></code></pre></td></tr></table></figure>

<h5 id="Data"><a href="#Data" class="headerlink" title="Data"></a>Data</h5><p><code>Data</code>包装组件的所有数据类型输入和输出。FATE Pipeline 包括五种类型<code>data</code>，每种类型用于不同的场景。有关更多信息，请参阅<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/python/fate_client/pipeline/component/README.html">此处</a></p>
<h5 id="Model"><a href="#Model" class="headerlink" title="Model"></a>Model</h5><p><code>Model</code>定义组件的模型输入和输出。与 类似<code>Data</code>，这两种类型<code>models</code>用于不同的目的。有关更多信息，请参阅<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/python/fate_client/pipeline/component/README.html">此处</a>。</p>
<h4 id="构建pipeline"><a href="#构建pipeline" class="headerlink" title="构建pipeline"></a>构建pipeline</h4><p>初始化管道后，应指定作业参与者和发起者。以下是管道初始设置的示例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">pipeline = PipeLine()<br>pipeline.set_initiator(role=<span class="hljs-string">&#x27;guest&#x27;</span>, party_id=<span class="hljs-number">9999</span>)<br>pipeline.set_roles(guest=<span class="hljs-number">9999</span>, host=<span class="hljs-number">10000</span>, arbiter=<span class="hljs-number">10000</span>)<br></code></pre></td></tr></table></figure>

<p><code>Reader</code>需要读入数据源，以便其他组件可以处理数据。定义一个<code>Reader</code>组件：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">reader_0 = Reader(name=<span class="hljs-string">&quot;reader_0&quot;</span>)<br></code></pre></td></tr></table></figure>

<p>在大多数情况下，<code>DataIO</code>如下<code>Reader</code>将数据转换为DataInstance格式，然后可以用于数据工程和模型训练。某些组件（例如<code>Union</code>和<code>Intersection</code>）可以直接在非 DataInstance 表上运行。</p>
<p>可以通过设置为不同的角色单独配置所有管道组件<code>get_party_instance</code>。例如，<code>DataIO</code> 可以像这样专门为guest配置组件：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">dataio_0 = DataIO(name=<span class="hljs-string">&quot;dataio_0&quot;</span>)<br>guest_component_instance = dataio_0.get_party_instance(role=<span class="hljs-string">&#x27;guest&#x27;</span>, party_id=<span class="hljs-number">9999</span>)<br>guest_component_instance.component_param(with_label=<span class="hljs-literal">True</span>, output_format=<span class="hljs-string">&quot;dense&quot;</span>)<br></code></pre></td></tr></table></figure>

<p>要在管道中包含组件，请使用<code>add_component</code>. 要将<code>DataIO</code>组件添加 到先前创建的管道，请尝试以下操作：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pipeline.add_component(dataio_0, data=Data(data=reader_0.output.data))<br></code></pre></td></tr></table></figure>

<h5 id="以-Keras-风格构建-Fate-NN-模型"><a href="#以-Keras-风格构建-Fate-NN-模型" class="headerlink" title="以 Keras 风格构建 Fate NN 模型"></a>以 Keras 风格构建 Fate NN 模型</h5><p>参考：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/python/fate_client/pipeline/README.html#build-fate-nn-model-in-keras-style">https://fate.readthedocs.io/en/latest/_build_temp/python/fate_client/pipeline/README.html#build-fate-nn-model-in-keras-style</a></p>
<h4 id="初始化运行时作业参数"><a href="#初始化运行时作业参数" class="headerlink" title="初始化运行时作业参数"></a>初始化运行时作业参数</h4><p>为了拟合或预测，用户需要初始化运行时环境，如“backend”和“work_mode”，</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pipeline.runtime.entity <span class="hljs-keyword">import</span> JobParameters<br>job_parameters = JobParameters(backend=Backend.EGGROLL, work_mode=WorkMode.STANDALONE)<br></code></pre></td></tr></table></figure>

<h4 id="运行pipeline"><a href="#运行pipeline" class="headerlink" title="运行pipeline"></a>运行pipeline</h4><p>添加所有组件后，用户需要在运行设计的作业之前首先编译管道。编译后，可以使用适当的<code>Backend</code>和来拟合（运行训练作业）管道<code>WorkMode</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">pipeline.<span class="hljs-built_in">compile</span>()<br>pipeline.fit(job_parameters)<br></code></pre></td></tr></table></figure>

<h4 id="任务查询"><a href="#任务查询" class="headerlink" title="任务查询"></a>任务查询</h4><p>FATE Pipeline 提供 API 来查询组件信息，包括数据、模型和摘要。所有查询 API 都具有与<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/python/fate_client/flow_sdk">FlowPy</a>匹配的名称 ，而 Pipeline 检索查询结果并将其直接返回给用户。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">summary = pipeline.get_component(<span class="hljs-string">&quot;hetero_lr_0&quot;</span>).get_summary()<br></code></pre></td></tr></table></figure>

<h4 id="部署组件"><a href="#部署组件" class="headerlink" title="部署组件"></a>部署组件</h4><p>一旦pipeline 拟合完成，就可以在新数据集上运行预测。在预测之前，需要首先部署必要的组件。此步骤标记要由预测管道使用的选定组件。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># deploy select components</span><br>pipeline.deploy_component([dataio_0, hetero_lr_0])<br><span class="hljs-comment"># deploy all components</span><br><span class="hljs-comment"># note that Reader component cannot be deployed. Always deploy pipeline with Reader by specified component list.</span><br>pipeline.deploy_component()<br></code></pre></td></tr></table></figure>

<h4 id="使用pipeline进行预测"><a href="#使用pipeline进行预测" class="headerlink" title="使用pipeline进行预测"></a>使用pipeline进行预测</h4><p>首先，启动一个新的管道，然后指定用于预测的数据源。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">predict_pipeline = PipeLine()<br>predict_pipeline.add_component(reader_0)<br>predict_pipeline.add_component(pipeline,<br>                               data=Data(predict_input=&#123;pipeline.dataio_0.<span class="hljs-built_in">input</span>.data: reader_0.output.data&#125;))<br></code></pre></td></tr></table></figure>

<p>然后可以在新pipeline上启动预测。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">predict_pipeline.predict(job_parameters)<br></code></pre></td></tr></table></figure>

<p>此外，由于pipeline是模块化的，用户可以在运行预测之前向原始pipeline添加新组件。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">predict_pipeline.add_component(evaluation_0, data=Data(data=pipeline.hetero_lr_0.output.data))<br>predict_pipeline.predict(job_parameters)<br></code></pre></td></tr></table></figure>

<h4 id="pipeline的保存和恢复"><a href="#pipeline的保存和恢复" class="headerlink" title="pipeline的保存和恢复"></a>pipeline的保存和恢复</h4><p>要保存管道，只需使用<strong>转储</strong>接口。</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">pipeline.<span class="hljs-keyword">dump</span>(<span class="hljs-string">&quot;pipeline_saved.pkl&quot;</span>)<br></code></pre></td></tr></table></figure>

<p>要恢复管道，请使用<strong>load_model_from_file</strong>接口。</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">from pipeline.backend.pipeline import PineLine<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">PipeLine</span>.</span></span>load<span class="hljs-constructor">_model_from_file(<span class="hljs-string">&quot;pipeline_saved.pkl&quot;</span>)</span><br></code></pre></td></tr></table></figure>

<h4 id="pipeline汇总信息"><a href="#pipeline汇总信息" class="headerlink" title="pipeline汇总信息"></a>pipeline汇总信息</h4><p>要获取管道的详细信息，请使用<strong>describe</strong>接口，它会打印“创建时间”拟合或预测状态以及构建的 dsl（如果存在）。</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">pipeline</span><span class="hljs-selector-class">.describe</span>()<br></code></pre></td></tr></table></figure>

<h4 id="管道与-CLI"><a href="#管道与-CLI" class="headerlink" title="管道与 CLI"></a>管道与 CLI</h4><p>在过去的版本中，用户通过命令行界面与 FATE 交互，通常使用手动配置的 conf 和 dsl json 文件。手动配置既乏味又容易出错。FATE Pipeline 在编译时自动形成任务配置文件，允许快速尝试任务设计。</p>
<h3 id="日志"><a href="#日志" class="headerlink" title="日志"></a>日志</h3><p>FATE-Flow服务日志：/fate/logs/fate_flow/</p>
<p>任务日志:/fate/logs/$job_id/</p>
<h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><p>参考：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/python/fate_flow/README_zh.html#id10">https://fate.readthedocs.io/en/latest/_build_temp/python/fate_flow/README_zh.html#id10</a></p>
<h2 id="测试样例"><a href="#测试样例" class="headerlink" title="测试样例"></a>测试样例</h2><p>FATE Board任务查看界面:<a target="_blank" rel="noopener" href="http://192.168.1.75:8080/#/history">http://192.168.1.75:8080/#/history</a></p>
<p>参考：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/examples/experiment_template/user_usage/dsl_v2_predict_tutorial.html">https://fate.readthedocs.io/en/latest/_build_temp/examples/experiment_template/user_usage/dsl_v2_predict_tutorial.html</a></p>
<h3 id="测试用例1-上传文件"><a href="#测试用例1-上传文件" class="headerlink" title="测试用例1-上传文件"></a>测试用例1-上传文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">python /fate/examples/pipeline/demo/pipeline-upload.py --base  /fate<br></code></pre></td></tr></table></figure>

<p>pipeline-upload.py内容如下：</p>
<p>将examples/data/breast_hetero_guest.csv改为自己想上传的文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> argparse<br><br><span class="hljs-keyword">from</span> pipeline.backend.config <span class="hljs-keyword">import</span> Backend, WorkMode<br><span class="hljs-keyword">from</span> pipeline.backend.pipeline <span class="hljs-keyword">import</span> PipeLine<br><br><span class="hljs-comment"># path to data</span><br><span class="hljs-comment"># default fate installation path</span><br>DATA_BASE = <span class="hljs-string">&quot;/data/projects/fate&quot;</span><br><br><span class="hljs-comment"># site-package ver</span><br><span class="hljs-comment"># import site</span><br><span class="hljs-comment"># DATA_BASE = site.getsitepackages()[0]</span><br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>(<span class="hljs-params">data_base=DATA_BASE</span>):</span><br>    <span class="hljs-comment"># parties config</span><br>    guest = <span class="hljs-number">9999</span><br>    <span class="hljs-comment"># 0 for eggroll, 1 for spark</span><br>    backend = Backend.EGGROLL<br>    <span class="hljs-comment"># 0 for standalone, 1 for cluster</span><br>    work_mode = WorkMode.STANDALONE<br>    <span class="hljs-comment"># use the work mode below for cluster deployment</span><br>    <span class="hljs-comment"># work_mode = WorkMode.CLUSTER</span><br><br>    <span class="hljs-comment"># partition for data storage</span><br>    partition = <span class="hljs-number">4</span><br><br>    <span class="hljs-comment"># table name and namespace, used in FATE job configuration</span><br>    dense_data = &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;breast_hetero_guest&quot;</span>, <span class="hljs-string">&quot;namespace&quot;</span>: <span class="hljs-string">f&quot;experiment&quot;</span>&#125;<br>    tag_data = &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;breast_hetero_host&quot;</span>, <span class="hljs-string">&quot;namespace&quot;</span>: <span class="hljs-string">f&quot;experiment&quot;</span>&#125;<br><br>    pipeline_upload = PipeLine().set_initiator(role=<span class="hljs-string">&quot;guest&quot;</span>, party_id=guest).set_roles(guest=guest)<br>    <span class="hljs-comment"># add upload data info</span><br>    <span class="hljs-comment"># path to csv file(s) to be uploaded, modify to upload designated data</span><br>    pipeline_upload.add_upload_data(file=os.path.join(data_base, <span class="hljs-string">&quot;examples/data/breast_hetero_guest.csv&quot;</span>),<br>                                    table_name=dense_data[<span class="hljs-string">&quot;name&quot;</span>],             <span class="hljs-comment"># table name</span><br>                                    namespace=dense_data[<span class="hljs-string">&quot;namespace&quot;</span>],         <span class="hljs-comment"># namespace</span><br>                                    head=<span class="hljs-number">1</span>, partition=partition)               <span class="hljs-comment"># data info</span><br><br>    pipeline_upload.add_upload_data(file=os.path.join(data_base, <span class="hljs-string">&quot;examples/data/breast_hetero_host.csv&quot;</span>),<br>                                    table_name=tag_data[<span class="hljs-string">&quot;name&quot;</span>],<br>                                    namespace=tag_data[<span class="hljs-string">&quot;namespace&quot;</span>],<br>                                    head=<span class="hljs-number">1</span>, partition=partition)<br><br>    <span class="hljs-comment"># upload data</span><br>    pipeline_upload.upload(work_mode=work_mode, backend=backend, drop=<span class="hljs-number">1</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    parser = argparse.ArgumentParser(<span class="hljs-string">&quot;PIPELINE DEMO&quot;</span>)<br>    parser.add_argument(<span class="hljs-string">&quot;--base&quot;</span>, <span class="hljs-string">&quot;-b&quot;</span>, <span class="hljs-built_in">type</span>=<span class="hljs-built_in">str</span>,<br>                        <span class="hljs-built_in">help</span>=<span class="hljs-string">&quot;data base, path to directory that contains examples/data&quot;</span>)<br><br>    args = parser.parse_args()<br>    <span class="hljs-keyword">if</span> args.base <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<br>        main(args.base)<br>    <span class="hljs-keyword">else</span>:<br>        main()<br></code></pre></td></tr></table></figure>

<h3 id="测试用例2-训练和评估模型"><a href="#测试用例2-训练和评估模型" class="headerlink" title="测试用例2-训练和评估模型"></a>测试用例2-训练和评估模型</h3><p>pipeline搭建：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">python /fate/examples/pipeline/demo/pipeline-quick-demo.py<br></code></pre></td></tr></table></figure>

<p>pipeline-quick-demo.py内容如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">from</span> pipeline.backend.config <span class="hljs-keyword">import</span> Backend, WorkMode<br><span class="hljs-keyword">from</span> pipeline.backend.pipeline <span class="hljs-keyword">import</span> PipeLine<br><span class="hljs-keyword">from</span> pipeline.component <span class="hljs-keyword">import</span> Reader, DataIO, Intersection, HeteroSecureBoost, Evaluation<br><span class="hljs-keyword">from</span> pipeline.interface <span class="hljs-keyword">import</span> Data<br><span class="hljs-keyword">from</span> pipeline.runtime.entity <span class="hljs-keyword">import</span> JobParameters<br><br><span class="hljs-comment"># table name &amp; namespace in data storage</span><br><span class="hljs-comment"># data should be uploaded before running modeling task</span><br>guest_train_data = &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;breast_hetero_guest&quot;</span>, <span class="hljs-string">&quot;namespace&quot;</span>: <span class="hljs-string">&quot;experiment&quot;</span>&#125;<br>host_train_data = &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;breast_hetero_host&quot;</span>, <span class="hljs-string">&quot;namespace&quot;</span>: <span class="hljs-string">&quot;experiment&quot;</span>&#125;<br><br><span class="hljs-comment"># initialize pipeline</span><br>pipeline = PipeLine().set_initiator(role=<span class="hljs-string">&quot;guest&quot;</span>, party_id=<span class="hljs-number">9999</span>).set_roles(guest=<span class="hljs-number">9999</span>, host=<span class="hljs-number">10000</span>)<br><br><span class="hljs-comment"># define components</span><br>reader_0 = Reader(name=<span class="hljs-string">&quot;reader_0&quot;</span>)<br>reader_0.get_party_instance(role=<span class="hljs-string">&quot;guest&quot;</span>, party_id=<span class="hljs-number">9999</span>).component_param(table=guest_train_data)<br>reader_0.get_party_instance(role=<span class="hljs-string">&quot;host&quot;</span>, party_id=<span class="hljs-number">10000</span>).component_param(table=host_train_data)<br>dataio_0 = DataIO(name=<span class="hljs-string">&quot;dataio_0&quot;</span>, with_label=<span class="hljs-literal">True</span>)<br>dataio_0.get_party_instance(role=<span class="hljs-string">&quot;host&quot;</span>, party_id=<span class="hljs-number">10000</span>).component_param(with_label=<span class="hljs-literal">False</span>)<br>intersect_0 = Intersection(name=<span class="hljs-string">&quot;intersection_0&quot;</span>)<br>hetero_secureboost_0 = HeteroSecureBoost(name=<span class="hljs-string">&quot;hetero_secureboost_0&quot;</span>,<br>                                         num_trees=<span class="hljs-number">5</span>,<br>                                         bin_num=<span class="hljs-number">16</span>,<br>                                         task_type=<span class="hljs-string">&quot;classification&quot;</span>,<br>                                         objective_param=&#123;<span class="hljs-string">&quot;objective&quot;</span>: <span class="hljs-string">&quot;cross_entropy&quot;</span>&#125;,<br>                                         encrypt_param=&#123;<span class="hljs-string">&quot;method&quot;</span>: <span class="hljs-string">&quot;iterativeAffine&quot;</span>&#125;,<br>                                         tree_param=&#123;<span class="hljs-string">&quot;max_depth&quot;</span>: <span class="hljs-number">3</span>&#125;)<br>evaluation_0 = Evaluation(name=<span class="hljs-string">&quot;evaluation_0&quot;</span>, eval_type=<span class="hljs-string">&quot;binary&quot;</span>)<br><br><span class="hljs-comment"># add components to pipeline, in order of task execution</span><br>pipeline.add_component(reader_0)\<br>    .add_component(dataio_0, data=Data(data=reader_0.output.data))\<br>    .add_component(intersect_0, data=Data(data=dataio_0.output.data))\<br>    .add_component(hetero_secureboost_0, data=Data(train_data=intersect_0.output.data))\<br>    .add_component(evaluation_0, data=Data(data=hetero_secureboost_0.output.data))<br><br><span class="hljs-comment"># compile &amp; fit pipeline</span><br>pipeline.<span class="hljs-built_in">compile</span>().fit(JobParameters(backend=Backend.EGGROLL, work_mode=WorkMode.STANDALONE))<br><span class="hljs-comment"># to run this task with cluster deployment, use the following setting instead</span><br><span class="hljs-comment"># may change data engine backend according to actual environment</span><br><span class="hljs-comment"># pipeline.compile().fit(JobParameters(backend=Backend.EGGROLL, work_mode=WorkMode.CLUSTER))</span><br><br><br><span class="hljs-comment"># query component summary</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Evaluation summary:\n<span class="hljs-subst">&#123;json.dumps(pipeline.get_component(<span class="hljs-string">&#x27;evaluation_0&#x27;</span>).get_summary(), indent=<span class="hljs-number">4</span>)&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure>

<p>fate flow搭建:</p>
<p>(用户可以到/fate/examples/dsl/v2/寻找合适的算法和配置文件替换)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">flow job submit <br>-c /fate/examples/dsl/v2/hetero_secureboost/test_secureboost_train_complete_secure_conf.json <br>-d /fate/examples/dsl/v2/hetero_secureboost/test_secureboost_train_dsl.json<br></code></pre></td></tr></table></figure>

<h3 id="测试用例3-模型训练、部署及预测"><a href="#测试用例3-模型训练、部署及预测" class="headerlink" title="测试用例3-模型训练、部署及预测"></a>测试用例3-模型训练、部署及预测</h3><p>搭建一个hetero secureboost 模型，并使用模型预测</p>
<h4 id="pipeline搭建"><a href="#pipeline搭建" class="headerlink" title="pipeline搭建"></a><strong>pipeline搭建</strong></h4><p>pipeline</p>
<p>参考：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/examples/experiment_template/user_usage/pipeline_predict_tutorial.html">https://fate.readthedocs.io/en/latest/_build_temp/examples/experiment_template/user_usage/pipeline_predict_tutorial.html</a></p>
<p>1.上传文件(测试用例1已经上传了)</p>
<p>2.主机环境下创建文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> /home/docker_standalone_fate_1.6.0/fate_job/<br>vim fit_Hetero_SecureBoost_model.py<br></code></pre></td></tr></table></figure>

<p>文件内容如下：（用户可参照/fate/examples/pipeline/中对应算法，将代码与算法列表<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/python/federatedml/README.html#algorithm-list%E5%AF%B9%E5%BA%94%E7%AE%97%E6%B3%95%E4%BB%8B%E7%BB%8D%E7%BB%93%E5%90%88%E6%9C%89%E5%8A%A9%E4%BA%8E%E7%90%86%E8%A7%A3%EF%BC%89">https://fate.readthedocs.io/en/latest/_build_temp/python/federatedml/README.html#algorithm-list对应算法介绍结合有助于理解）</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pipeline.backend.config <span class="hljs-keyword">import</span> Backend, WorkMode <span class="hljs-comment"># configs</span><br><span class="hljs-keyword">from</span> pipeline.backend.pipeline <span class="hljs-keyword">import</span> PipeLine <span class="hljs-comment"># Pipeline </span><br><span class="hljs-keyword">from</span> pipeline.component <span class="hljs-keyword">import</span> Reader, DataIO, Intersection, HeteroSecureBoost <span class="hljs-comment"># fate components</span><br><span class="hljs-keyword">from</span> pipeline.interface <span class="hljs-keyword">import</span> Data  <span class="hljs-comment"># data flow</span><br><span class="hljs-keyword">from</span> pipeline.runtime.entity <span class="hljs-keyword">import</span> JobParameters <span class="hljs-comment"># parameter class</span><br><br><span class="hljs-comment"># define dataset name and namespace</span><br>guest_train_data = &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;breast_hetero_guest&quot;</span>, <span class="hljs-string">&quot;namespace&quot;</span>: <span class="hljs-string">&quot;experiment&quot;</span>&#125;<br>host_train_data = &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;breast_hetero_host&quot;</span>, <span class="hljs-string">&quot;namespace&quot;</span>: <span class="hljs-string">&quot;experiment&quot;</span>&#125;<br><br><span class="hljs-comment"># initialize pipeline, set guest as initiator and set guest/host party id</span><br>pipeline = PipeLine().set_initiator(role=<span class="hljs-string">&quot;guest&quot;</span>, party_id=<span class="hljs-number">9999</span>).set_roles(guest=<span class="hljs-number">9999</span>, host=<span class="hljs-number">10000</span>)<br><br><span class="hljs-comment"># define components</span><br><span class="hljs-comment"># reader read raw data </span><br>reader_0 = Reader(name=<span class="hljs-string">&quot;reader_0&quot;</span>)<br>reader_0.get_party_instance(role=<span class="hljs-string">&quot;guest&quot;</span>, party_id=<span class="hljs-number">9999</span>).component_param(table=guest_train_data)<br>reader_0.get_party_instance(role=<span class="hljs-string">&quot;host&quot;</span>, party_id=<span class="hljs-number">10000</span>).component_param(table=host_train_data)<br><span class="hljs-comment"># data_io transform data</span><br>dataio_0 = DataIO(name=<span class="hljs-string">&quot;dataio_0&quot;</span>, with_label=<span class="hljs-literal">True</span>)<br>dataio_0.get_party_instance(role=<span class="hljs-string">&quot;host&quot;</span>, party_id=<span class="hljs-number">10000</span>).component_param(with_label=<span class="hljs-literal">False</span>)<br><span class="hljs-comment"># find sample intersection using Intersection components</span><br>intersect_0 = Intersection(name=<span class="hljs-string">&quot;intersection_0&quot;</span>)<br><span class="hljs-comment"># hetero secureboost components, setting algorithm parameters</span><br>hetero_secureboost_0 = HeteroSecureBoost(name=<span class="hljs-string">&quot;hetero_secureboost_0&quot;</span>,<br>				     num_trees=<span class="hljs-number">5</span>,<br>				     bin_num=<span class="hljs-number">16</span>,<br>				     task_type=<span class="hljs-string">&quot;classification&quot;</span>,<br>				     objective_param=&#123;<span class="hljs-string">&quot;objective&quot;</span>: <span class="hljs-string">&quot;cross_entropy&quot;</span>&#125;,<br>				     encrypt_param=&#123;<span class="hljs-string">&quot;method&quot;</span>: <span class="hljs-string">&quot;iterativeAffine&quot;</span>&#125;,<br>				     tree_param=&#123;<span class="hljs-string">&quot;max_depth&quot;</span>: <span class="hljs-number">3</span>&#125;)<br><br><span class="hljs-comment"># add components to pipeline, in the order of task execution</span><br>pipeline.add_component(reader_0)\<br>.add_component(dataio_0, data=Data(data=reader_0.output.data))\<br>.add_component(intersect_0, data=Data(data=dataio_0.output.data))\<br>.add_component(hetero_secureboost_0, data=Data(train_data=intersect_0.output.data))<br><br><span class="hljs-comment"># compile &amp; fit pipeline</span><br>pipeline.<span class="hljs-built_in">compile</span>().fit(JobParameters(backend=Backend.EGGROLL, work_mode=WorkMode.STANDALONE))<br><br><span class="hljs-comment"># save train pipeline</span><br>pipeline.dump(<span class="hljs-string">&quot;pipeline_saved.pkl&quot;</span>)<br></code></pre></td></tr></table></figure>

<p>docker环境下执行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span>  /fate/fate_job<br>python fit_Hetero_SecureBoost_model.py<br></code></pre></td></tr></table></figure>

<p>3.主机环境下创建文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim predict_instances_by_Hetero_SecureBoost_model.py<br></code></pre></td></tr></table></figure>

<p>文件内容如下：（用户自行将breast_hetero_guest改成上传的表名）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pipeline.backend.pipeline <span class="hljs-keyword">import</span> PipeLine<br><span class="hljs-keyword">from</span> pipeline.component.reader <span class="hljs-keyword">import</span> Reader<br><span class="hljs-keyword">from</span> pipeline.interface.data <span class="hljs-keyword">import</span> Data<br><span class="hljs-keyword">from</span> pipeline.backend.config <span class="hljs-keyword">import</span> Backend, WorkMode <span class="hljs-comment"># configs</span><br><span class="hljs-keyword">from</span> pipeline.runtime.entity <span class="hljs-keyword">import</span> JobParameters <span class="hljs-comment"># parameter class</span><br><br><span class="hljs-comment"># load train pipeline</span><br>pipeline = PipeLine.load_model_from_file(<span class="hljs-string">&#x27;pipeline_saved.pkl&#x27;</span>)<br><span class="hljs-comment"># deploy components in training step</span><br>pipeline.deploy_component([pipeline.dataio_0, pipeline.intersection_0, pipeline.<br>                           hetero_secureboost_0])<br><span class="hljs-comment"># set new instances to predict</span><br><span class="hljs-comment"># new dataset</span><br>guest_train_data = &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;breast_hetero_guest&quot;</span>, <span class="hljs-string">&quot;namespace&quot;</span>: <span class="hljs-string">&quot;experiment&quot;</span>&#125;<br>host_train_data = &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;breast_hetero_host&quot;</span>, <span class="hljs-string">&quot;namespace&quot;</span>: <span class="hljs-string">&quot;experiment&quot;</span>&#125;<br><br><span class="hljs-comment"># set new reader</span><br>reader_0 = Reader(name=<span class="hljs-string">&quot;reader_0&quot;</span>)<br>reader_0.get_party_instance(role=<span class="hljs-string">&quot;guest&quot;</span>, party_id=<span class="hljs-number">9999</span>).component_param(table=guest_train_data)<br>reader_0.get_party_instance(role=<span class="hljs-string">&quot;host&quot;</span>, party_id=<span class="hljs-number">10000</span>).component_param(table=host_train_data)<br><br><span class="hljs-comment"># new predict pipeline</span><br>predict_pipeline = PipeLine()<br><span class="hljs-comment"># update reader</span><br>predict_pipeline.add_component(reader_0)<br><span class="hljs-comment"># add selected components from train pipeline onto predict pipeline</span><br>predict_pipeline.add_component(pipeline,data=Data(predict_input=&#123;pipeline.dataio_0.<span class="hljs-built_in">input</span>.data: reader_0.output.data&#125;))<br><span class="hljs-comment"># run predict model</span><br>predict_pipeline.predict(JobParameters(backend=Backend.EGGROLL, work_mode=WorkMode.STANDALONE))<br></code></pre></td></tr></table></figure>

<p>docker环境下执行，FATE Board查看结果</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">python predict_instances_by_Hetero_SecureBoost_model.py<br></code></pre></td></tr></table></figure>

<h4 id="flow命令搭建"><a href="#flow命令搭建" class="headerlink" title="flow命令搭建"></a>flow命令搭建</h4><p>参考：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/examples/experiment_template/user_usage/dsl_v2_predict_tutorial.html">https://fate.readthedocs.io/en/latest/_build_temp/examples/experiment_template/user_usage/dsl_v2_predict_tutorial.html</a></p>
<p>(1).训练模型</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs awk">cd <span class="hljs-regexp">/fate/</span>examples/<br><br>flow job submit <br>-c dsl<span class="hljs-regexp">/v2/</span>hetero_secureboost/test_secureboost_train_binary_conf.json <br>-d dsl<span class="hljs-regexp">/v2/</span>hetero_secureboost/test_secureboost_train_dsl.json<br></code></pre></td></tr></table></figure>

<p>(2).使用 flow_client 来部署预测任务中需要的组件</p>
<p><strong>记得修改model-id，model-version</strong></p>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams">flow <span class="hljs-keyword">model</span> deploy --<span class="hljs-keyword">model</span>-id guest<span class="hljs-number">-9999</span>#host<span class="hljs-number">-9998</span>#<span class="hljs-keyword">model</span> --<span class="hljs-keyword">model</span>-version <span class="hljs-number">2021090109322084026031</span> --cpn-list <span class="hljs-string">&quot;reader_0, dataio_0, intersection_0, hetero_secure_boost_0&quot;</span><br></code></pre></td></tr></table></figure>

<p>如果执行返回：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>    <span class="hljs-attr">&quot;retcode&quot;</span>: <span class="hljs-number">100</span>,<br>    <span class="hljs-attr">&quot;retmsg&quot;</span>: <span class="hljs-string">&quot;&#x27;Pipeline&#x27;&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>是因为模型还没有搭建完成，可以到board里面查看，等完成后再执行部署</p>
<p>(3).预测文件</p>
<p>用部署文件返回的model_id 、model_version、数据集名字替换 **/fate/examples/dsl/v2/**hetero_secureboost/test_predict_conf.json 内容中的 model_id 、model_version ，替换后的内容保存到 /fate/fate_job/new_test_predict_conf.json（新建文件）</p>
<p>执行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">flow job submit -c /fate/fate_job/lxy/new_test_predict_conf.json<br></code></pre></td></tr></table></figure>

<p>如果返回以下内容，是因为host,guest party_id与上传文件host,guest party_id的不一致</p>
<figure class="highlight sml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sml">&#123;<br>	<span class="hljs-symbol">&#x27;data&#x27;</span>:<span class="hljs-symbol">&#x27;No</span> such file or directory&#x27;,<br>	<span class="hljs-symbol">&#x27;retcode&#x27;</span>:<span class="hljs-number">100</span>,<br>	<span class="hljs-symbol">&#x27;retmsg&#x27;</span>:<span class="hljs-string">&quot;2&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>如果提交任务返回如下内容，是因为没有执行部署操作：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>    <span class="hljs-attr">&quot;retcode&quot;</span>: <span class="hljs-number">100</span>,<br>    <span class="hljs-attr">&quot;retmsg&quot;</span>: <span class="hljs-string">&quot;Model arbiter-10000#guest-9999#host-10000#model 20210908033432743389158 has not been deployed yet.&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="测试用例4-独立使用pipeline搭建模型"><a href="#测试用例4-独立使用pipeline搭建模型" class="headerlink" title="测试用例4-独立使用pipeline搭建模型"></a>测试用例4-独立使用pipeline搭建模型</h3><h4 id="1-选定合适的算法和数据集"><a href="#1-选定合适的算法和数据集" class="headerlink" title="1.选定合适的算法和数据集"></a>1.选定合适的算法和数据集</h4><p>下载FATE源码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> https://github.com/FederatedAI/FATE.git<br></code></pre></td></tr></table></figure>

<p>打开examples目录下的data/READMA.md文件，查看测试数据集信息，使用线性回归模型HeteroLinR，和标签是连续值的student_hetero数据集</p>
<h4 id="2-上传数据集"><a href="#2-上传数据集" class="headerlink" title="2.上传数据集"></a>2.上传数据集</h4><p>参考测试用例1</p>
<h4 id="3-编写训练和验证pipeline代码"><a href="#3-编写训练和验证pipeline代码" class="headerlink" title="3.编写训练和验证pipeline代码"></a>3.编写训练和验证pipeline代码</h4><p>在测试用例3 pipeline代码基础上修改，</p>
<p>可以结合HeteroLinR算法详情<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/python/federatedml/linear_model/linear_regression/README.html%E8%BF%98%E6%9C%89%E6%BA%90%E7%A0%81FATE/FATE-master/examples/pipeline/hetero_linear_regression/pipeline-hetero-linr.py%E4%B8%A4%E4%B8%AA%E6%96%87%E4%BB%B6%E7%90%86%E8%A7%A3%E8%AF%A5%E7%AE%97%E6%B3%95%E3%80%82">https://fate.readthedocs.io/en/latest/_build_temp/python/federatedml/linear_model/linear_regression/README.html还有源码FATE/FATE-master/examples/pipeline/hetero_linear_regression/pipeline-hetero-linr.py两个文件理解该算法。</a></p>
<p>发现HeteroLinR pipeline搭建与测试用例3 HeteroSecureBoost模型搭建相比，需要多配置一个arbiter，其他需要改的操作有：修改数据集名称，HeteroLinR模型可以参数可以参考pipeline-hetero-linr.py里模型参数，此处只设置名字</p>
<p>创建linr_model_train_and_evaluation.py文件</p>
<p>代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pipeline.backend.config <span class="hljs-keyword">import</span> Backend, WorkMode <span class="hljs-comment"># configs</span><br><span class="hljs-keyword">from</span> pipeline.backend.pipeline <span class="hljs-keyword">import</span> PipeLine <span class="hljs-comment"># Pipeline</span><br><span class="hljs-keyword">from</span> pipeline.component <span class="hljs-keyword">import</span> Reader, DataIO, Intersection, HeteroSecureBoost, HeteroLinR ,Evaluation<span class="hljs-comment"># fate components</span><br><span class="hljs-keyword">from</span> pipeline.interface <span class="hljs-keyword">import</span> Data  <span class="hljs-comment"># data flow</span><br><span class="hljs-keyword">from</span> pipeline.runtime.entity <span class="hljs-keyword">import</span> JobParameters <span class="hljs-comment"># parameter class</span><br><br><span class="hljs-comment"># define dataset name and namespace</span><br>guest_train_data = &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;student_hetero_guest&quot;</span>, <span class="hljs-string">&quot;namespace&quot;</span>: <span class="hljs-string">&quot;experiment&quot;</span>&#125;<br>host_train_data = &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;student_hetero_host&quot;</span>, <span class="hljs-string">&quot;namespace&quot;</span>: <span class="hljs-string">&quot;experiment&quot;</span>&#125;<br><br><span class="hljs-comment"># initialize pipeline, set guest as initiator and set guest/host party id</span><br>pipeline = PipeLine().set_initiator(role=<span class="hljs-string">&quot;guest&quot;</span>, party_id=<span class="hljs-number">9999</span>).set_roles(guest=<span class="hljs-number">9999</span>, host=<span class="hljs-number">10000</span>, arbiter=<span class="hljs-number">10000</span>)<br>reader_0 = Reader(name=<span class="hljs-string">&quot;reader_0&quot;</span>)<br>reader_0.get_party_instance(role=<span class="hljs-string">&#x27;guest&#x27;</span>, party_id=<span class="hljs-number">9999</span>).component_param(table=guest_train_data)<br>reader_0.get_party_instance(role=<span class="hljs-string">&#x27;host&#x27;</span>, party_id=<span class="hljs-number">10000</span>).component_param(table=host_train_data)<br><br>dataio_0 = DataIO(name=<span class="hljs-string">&quot;dataio_0&quot;</span>)<br>dataio_0.get_party_instance(role=<span class="hljs-string">&#x27;guest&#x27;</span>, party_id=<span class="hljs-number">9999</span>).component_param(with_label=<span class="hljs-literal">True</span>, label_name=<span class="hljs-string">&quot;y&quot;</span>,<br>																		 label_type=<span class="hljs-string">&quot;int&quot;</span>, output_format=<span class="hljs-string">&quot;dense&quot;</span>)<br>dataio_0.get_party_instance(role=<span class="hljs-string">&#x27;host&#x27;</span>, party_id=<span class="hljs-number">10000</span>).component_param(with_label=<span class="hljs-literal">False</span>)<br><br>intersection_0 = Intersection(name=<span class="hljs-string">&quot;intersection_0&quot;</span>)<br>hetero_linr_0 = HeteroLinR(name=<span class="hljs-string">&quot;hetero_linr_0&quot;</span>)<br><br>evaluation_0 = Evaluation(name=<span class="hljs-string">&quot;evaluation_0&quot;</span>, eval_type=<span class="hljs-string">&quot;regression&quot;</span>, pos_label=<span class="hljs-number">1</span>)<br> <br>pipeline.add_component(reader_0)<br>pipeline.add_component(dataio_0, data=Data(data=reader_0.output.data))<br>pipeline.add_component(intersection_0, data=Data(data=dataio_0.output.data))<br>pipeline.add_component(hetero_linr_0, data=Data(train_data=intersection_0.output.data))<br>pipeline.add_component(evaluation_0, data=Data(data=hetero_linr_0.output.data))<br><br>pipeline.<span class="hljs-built_in">compile</span>()<br><br>job_parameters = JobParameters(backend=Backend.EGGROLL, work_mode=WorkMode.STANDALONE)<br>pipeline.fit(job_parameters)<br><br>pipeline.dump(<span class="hljs-string">&quot;/fate/fate_job/lxy/hetero_linr_pipeline_saved.pkl&quot;</span>)<span class="hljs-comment">#保存模型</span><br></code></pre></td></tr></table></figure>

<p>docker执行该文件：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">cd</span> /fate/fate_job/lxy<br><span class="hljs-keyword">python</span> linr_model_train_and_evaluation.<span class="hljs-keyword">py</span><br></code></pre></td></tr></table></figure>

<h4 id="4-编写预测-pipeline代码"><a href="#4-编写预测-pipeline代码" class="headerlink" title="4.编写预测 pipeline代码"></a>4.编写预测 pipeline代码</h4><p>创建linr_model_predict.py文件，在测试用例3 pipeline代码基础上修改，只需要修改表名和模型名即可.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pipeline.backend.pipeline <span class="hljs-keyword">import</span> PipeLine<br><span class="hljs-keyword">from</span> pipeline.component.reader <span class="hljs-keyword">import</span> Reader<br><span class="hljs-keyword">from</span> pipeline.interface.data <span class="hljs-keyword">import</span> Data<br><span class="hljs-keyword">from</span> pipeline.backend.config <span class="hljs-keyword">import</span> Backend, WorkMode <span class="hljs-comment"># configs</span><br><span class="hljs-keyword">from</span> pipeline.runtime.entity <span class="hljs-keyword">import</span> JobParameters <span class="hljs-comment"># parameter class</span><br><br><span class="hljs-comment"># load train pipeline</span><br>pipeline = PipeLine.load_model_from_file(<span class="hljs-string">&#x27;/fate/fate_job/lxy/hetero_linr_pipeline_saved.pkl&#x27;</span>)<br><span class="hljs-comment"># deploy components in training step</span><br>pipeline.deploy_component([pipeline.dataio_0, pipeline.intersection_0, pipeline.<br>                           hetero_linr_0])<br><span class="hljs-comment"># set new instances to predict</span><br><span class="hljs-comment"># new dataset</span><br>guest_train_data = &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;student_hetero_guest&quot;</span>, <span class="hljs-string">&quot;namespace&quot;</span>: <span class="hljs-string">&quot;experiment&quot;</span>&#125;<br>host_train_data = &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;student_hetero_host&quot;</span>, <span class="hljs-string">&quot;namespace&quot;</span>: <span class="hljs-string">&quot;experiment&quot;</span>&#125;<br><br><span class="hljs-comment"># set new reader</span><br>reader_0 = Reader(name=<span class="hljs-string">&quot;reader_0&quot;</span>)<br>reader_0.get_party_instance(role=<span class="hljs-string">&quot;guest&quot;</span>, party_id=<span class="hljs-number">9999</span>).component_param(table=guest_train_data)<br>reader_0.get_party_instance(role=<span class="hljs-string">&quot;host&quot;</span>, party_id=<span class="hljs-number">10000</span>).component_param(table=host_train_data)<br><br><span class="hljs-comment"># new predict pipeline</span><br>predict_pipeline = PipeLine()<br><span class="hljs-comment"># update reader</span><br>predict_pipeline.add_component(reader_0)<br><span class="hljs-comment"># add selected components from train pipeline onto predict pipeline</span><br>predict_pipeline.add_component(pipeline,data=Data(predict_input=&#123;pipeline.dataio_0.<span class="hljs-built_in">input</span>.data: reader_0.output.data&#125;))<br><span class="hljs-comment"># run predict model</span><br>predict_pipeline.predict(JobParameters(backend=Backend.EGGROLL, work_mode=WorkMode.STANDALONE))<br></code></pre></td></tr></table></figure>

<h2 id="FATE-TEST"><a href="#FATE-TEST" class="headerlink" title="FATE TEST"></a>FATE TEST</h2><p>运行 FATE 测试的有用工具的集合。</p>
<h3 id="quick-start"><a href="#quick-start" class="headerlink" title="quick start"></a>quick start</h3><p>参考：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/python/fate_test/README.html#quick-start">https://fate.readthedocs.io/en/latest/_build_temp/python/fate_test/README.html#quick-start</a></p>
<h4 id="编辑默认的-fat-test-config-yaml"><a href="#编辑默认的-fat-test-config-yaml" class="headerlink" title="编辑默认的 fat_test_config.yaml"></a>编辑默认的 fat_test_config.yaml</h4><p>更改 /usr/local/lib/python3.6/site-packages/fate_test/fate_test_config.yaml文件，</p>
<figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-variable">data_base_dir</span>: <span class="hljs-function"><span class="hljs-title">path</span>(<span class="hljs-variable">FATE</span>)</span><br></code></pre></td></tr></table></figure>

<p>更改为</p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">data_base_dir: <span class="hljs-regexp">/fate/</span><br></code></pre></td></tr></table></figure>

<h4 id="运行-fate-test-套件"><a href="#运行-fate-test-套件" class="headerlink" title="运行 fate_test 套件"></a>运行 fate_test 套件</h4><p>套件：用于运行测试套件，收集 FATE 作业，Testsuite测试套件 用于按顺序运行一组作业。用于作业的数据可以在提交作业之前上传，也可以在作业完成后进行清理。这个工具对于 FATE 的发布测试很有用。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#fate_test suite -i &lt;path contains *testsuite.json&gt;</span><br>fate_test suite -i /fate/examples/dsl/v1/homo_nn/testsuite.json<br><span class="hljs-comment">#fate_test suite -i /fate/examples/dsl/v1/hetero_pearson/testsuite.json</span><br></code></pre></td></tr></table></figure>

<h4 id="运行一些-fate-test-基准测试"><a href="#运行一些-fate-test-基准测试" class="headerlink" title="运行一些 fate_test 基准测试"></a>运行一些 fate_test 基准测试</h4><p>用于比较 FATE 和其他机器学习系统之间的建模质量的 benchmark-quality</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#fate_test benchmark-quality -i &lt;path contains *benchmark.json&gt;</span><br>fate_test benchmark-quality -i /fate/examples/benchmark_quality/hetero_linear_regression/hetero_linr_benchmark.json<br></code></pre></td></tr></table></figure>

<h2 id="开发指南"><a href="#开发指南" class="headerlink" title="开发指南"></a>开发指南</h2><p>开发算法模块，详情参考：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/doc/develop_guide_zh.html">https://fate.readthedocs.io/en/latest/_build_temp/doc/develop_guide_zh.html</a></p>
<p>要开发模块，需要执行以下 5 个步骤。</p>
<ol>
<li>定义将在此模块中使用的 python 参数对象。</li>
<li>定义模块的 Setting conf json 配置文件。</li>
<li>如果模块需要联邦，则需定义传输变量配置文件。</li>
<li>您的算法模块需要继承model_base类，并完成几个指定的函数。</li>
<li>定义模型保存所需的protobuf文件。</li>
<li>若希望通过python脚本直接启动组件，需要在fate_client中定义Pipeline组件。</li>
</ol>
<h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><h3 id="计算API"><a href="#计算API" class="headerlink" title="计算API"></a>计算API</h3><p>初始化一个计算会话（computing session），参考：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/doc/api/computing.html">https://fate.readthedocs.io/en/latest/_build_temp/doc/api/computing.html</a></p>
<h2 id="联邦API"><a href="#联邦API" class="headerlink" title="联邦API"></a>联邦API</h2><p>包括低级API<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/doc/api/federation.html#fate_arch.abc._federation.FederationABC"><code>FederationABC</code></a>()和用户接口secure_add_example_transfer_variable，参考：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/doc/api/federation.html">https://fate.readthedocs.io/en/latest/_build_temp/doc/api/federation.html</a></p>
<h3 id="参数-1"><a href="#参数-1" class="headerlink" title="参数"></a>参数</h3><p>类的参数详情参考：<a target="_blank" rel="noopener" href="https://fate.readthedocs.io/en/latest/_build_temp/doc/api/params.html">https://fate.readthedocs.io/en/latest/_build_temp/doc/api/params.html</a></p>
<h3 id="遇到过的报错信息和解决方案"><a href="#遇到过的报错信息和解决方案" class="headerlink" title="遇到过的报错信息和解决方案"></a>遇到过的报错信息和解决方案</h3><h4 id="Federated-schedule-error-Please-check-rollSite-and-fateflow"><a href="#Federated-schedule-error-Please-check-rollSite-and-fateflow" class="headerlink" title="Federated schedule error, Please check rollSite and fateflow"></a>Federated schedule error, Please check rollSite and fateflow</h4><p>报错信息：Federated schedule error, Please check rollSite and fateflow network connectivityrpc request error: &lt;_InactiveRpcError of RPC that terminated…</p>
<p>原因：集群通信问题</p>
<p>解决方案：查看配置文件的 work mode设置与fate部署方式对应（单机 or 集群）</p>

  </article>

  
      
    <div class="nexmoe-post-copyright">
        <strong>Author：</strong>Shuyan<br>
        <strong>Link：</strong><a href="http://example.com/2022/06/07/%E8%81%94%E9%82%A6%E5%AD%A6%E4%B9%A0/%E8%81%94%E9%82%A6%E6%A1%86%E6%9E%B6%E9%83%A8%E7%BD%B2/FATE%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/" title="http:&#x2F;&#x2F;example.com&#x2F;2022&#x2F;06&#x2F;07&#x2F;%E8%81%94%E9%82%A6%E5%AD%A6%E4%B9%A0&#x2F;%E8%81%94%E9%82%A6%E6%A1%86%E6%9E%B6%E9%83%A8%E7%BD%B2&#x2F;FATE%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C&#x2F;" target="_blank" rel="noopener">http:&#x2F;&#x2F;example.com&#x2F;2022&#x2F;06&#x2F;07&#x2F;%E8%81%94%E9%82%A6%E5%AD%A6%E4%B9%A0&#x2F;%E8%81%94%E9%82%A6%E6%A1%86%E6%9E%B6%E9%83%A8%E7%BD%B2&#x2F;FATE%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C&#x2F;</a><br>
        
            <strong>版权声明：</strong>本文采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/cn/deed.zh" target="_blank">CC BY-NC-SA 3.0 CN</a> 协议进行许可
        
    </div>


  
  
  <div class="nexmoe-post-meta nexmoe-rainbow">
    
        <a class="nexmoefont icon-appstore-fill -link" href="/categories/%E8%81%94%E9%82%A6%E5%AD%A6%E4%B9%A0/">联邦学习</a>
    
    
        <a class="nexmoefont icon-tag-fill -none-link" href="/tags/%E8%81%94%E9%82%A6%E5%AD%A6%E4%B9%A0/" rel="tag">联邦学习</a>
    
</div>

  
      <div class="nexmoe-post-footer">
          <section class="nexmoe-comment">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.css">
<div id="gitalk"></div>
<script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script>
<script type="text/javascript">
    var gitalk = new Gitalk({
        clientID: '80b2453b6d5f37ad6225',
        clientSecret: '43e99fa852795c9a7b3eb924b2558c64b84bbdeb',
        id: window.location.pathname,
        repo: 'nexmoe.github.io',
        owner: 'nexmoe',
        admin: 'nexmoe'
    })
    gitalk.render('gitalk')
</script>
</section>
      </div>
  
</div>
            <div class="nexmoe-post-right">
              <div class="nexmoe-fixed">
                  <div class="nexmoe-tool"> 
                    
                      
                        
                          
                          
                              <button class="mdui-fab catalog" style="overflow:unset;">
                                  <i class="nexmoefont icon-i-catalog"></i>
                                  <div class="nexmoe-toc">
                                      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#FATE%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text">FATE简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#FATE%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6"><span class="toc-number">2.</span> <span class="toc-text">FATE技术框架</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#FederatedML"><span class="toc-number">2.0.1.</span> <span class="toc-text">FederatedML</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#FATE-Flow"><span class="toc-number">2.0.2.</span> <span class="toc-text">FATE_Flow</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#FATE-Board"><span class="toc-number">2.0.3.</span> <span class="toc-text">FATE-Board</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#FATE-Serving"><span class="toc-number">2.0.4.</span> <span class="toc-text">FATE-Serving</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%92%E8%89%B2"><span class="toc-number">3.</span> <span class="toc-text">角色</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Guest"><span class="toc-number">3.0.1.</span> <span class="toc-text">Guest</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Host"><span class="toc-number">3.0.2.</span> <span class="toc-text">Host</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#arbiter"><span class="toc-number">3.0.3.</span> <span class="toc-text">arbiter</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#FATE%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97"><span class="toc-number">4.</span> <span class="toc-text">FATE环境部署指南</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2"><span class="toc-number">4.1.</span> <span class="toc-text">单机部署</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2"><span class="toc-number">4.2.</span> <span class="toc-text">集群部署</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E6%9C%BA%E8%BF%9B%E5%85%A5%E5%88%B0docker-FATE%E9%95%9C%E5%83%8F%E5%91%BD%E4%BB%A4"><span class="toc-number">4.3.</span> <span class="toc-text">主机进入到docker FATE镜像命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BF%AB%E9%80%9F%E5%90%AF%E5%8A%A8-FATE-%E7%9A%84%E4%B8%80%E8%88%AC%E6%8C%87%E5%8D%97"><span class="toc-number">4.4.</span> <span class="toc-text">快速启动 FATE 的一般指南</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#FATE%E4%BD%BF%E7%94%A8%E9%A2%84%E5%A4%87%E7%9F%A5%E8%AF%86"><span class="toc-number">5.</span> <span class="toc-text">FATE使用预备知识</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8A%E4%BC%A0%E6%95%B0%E6%8D%AE%E6%8C%87%E5%8D%97"><span class="toc-number">5.1.</span> <span class="toc-text">上传数据指南</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A5%E5%8F%97%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">5.1.1.</span> <span class="toc-text">接受的数据类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E4%B8%8A%E4%BC%A0%E6%95%B0%E6%8D%AE%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">5.1.2.</span> <span class="toc-text">定义上传数据配置文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8A%E4%BC%A0%E5%91%BD%E4%BB%A4"><span class="toc-number">5.1.3.</span> <span class="toc-text">上传命令</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1%E9%85%8D%E7%BD%AE%E4%B8%8E%E8%BF%90%E8%A1%8C%E9%85%8D%E7%BD%AE%EF%BC%88DSL-amp-Task-Submit-Runtime-Conf-Setting%EF%BC%89V2"><span class="toc-number">5.2.</span> <span class="toc-text">任务配置与运行配置（DSL &amp; Task Submit Runtime Conf Setting）V2</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DSL%E9%85%8D%E7%BD%AE%E8%AF%B4%E6%98%8E"><span class="toc-number">5.2.1.</span> <span class="toc-text">DSL配置说明</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E6%A6%82%E8%BF%B0"><span class="toc-number">5.2.1.1.</span> <span class="toc-text">1.概述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-Components"><span class="toc-number">5.2.1.2.</span> <span class="toc-text">2.Components</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-module"><span class="toc-number">5.2.1.3.</span> <span class="toc-text">3.module</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-input"><span class="toc-number">5.2.1.4.</span> <span class="toc-text">4.input</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#Data%E8%BE%93%E5%85%A5"><span class="toc-number">5.2.1.4.1.</span> <span class="toc-text">Data输入</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Model%E8%BE%93%E5%85%A5"><span class="toc-number">5.2.1.4.2.</span> <span class="toc-text">Model输入</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-output"><span class="toc-number">5.2.1.5.</span> <span class="toc-text">5.output</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%BE%93%E5%87%BA"><span class="toc-number">5.2.1.5.1.</span> <span class="toc-text">数据输出</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%A8%A1%E5%9E%8B%E8%BE%93%E5%87%BA"><span class="toc-number">5.2.1.5.2.</span> <span class="toc-text">模型输出</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#DSL%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B"><span class="toc-number">5.2.1.6.</span> <span class="toc-text">DSL配置示例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6Submit-Runtime-Conf"><span class="toc-number">5.3.</span> <span class="toc-text">创建配置文件Submit Runtime Conf</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-DSL%E7%89%88%E6%9C%AC"><span class="toc-number">5.3.0.1.</span> <span class="toc-text">1. DSL版本</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-Job-Participants%EF%BC%88%E4%BD%9C%E4%B8%9A%E5%8F%82%E4%B8%8E%E6%96%B9%EF%BC%89"><span class="toc-number">5.3.0.2.</span> <span class="toc-text">2. Job Participants（作业参与方）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-algorithm-parameters%EF%BC%88%E7%B3%BB%E7%BB%9F%E8%BF%90%E8%A1%8C%E5%8F%82%E6%95%B0%EF%BC%89"><span class="toc-number">5.3.0.3.</span> <span class="toc-text">3.algorithm_parameters（系统运行参数）</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E5%BA%94%E7%94%A8%E8%8C%83%E5%9B%B4%E7%AD%96%E7%95%A5%E8%AE%BE%E7%BD%AE"><span class="toc-number">5.3.0.3.1.</span> <span class="toc-text">参数应用范围策略设置</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%94%AF%E6%8C%81%E7%9A%84%E7%B3%BB%E7%BB%9F%E5%8F%82%E6%95%B0"><span class="toc-number">5.3.0.3.2.</span> <span class="toc-text">支持的系统参数</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%9C%AA%E5%BC%80%E6%94%BE%E7%9A%84%E5%8F%82%E6%95%B0"><span class="toc-number">5.3.0.3.3.</span> <span class="toc-text">未开放的参数</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E9%85%8D%E7%BD%AE"><span class="toc-number">5.3.0.3.4.</span> <span class="toc-text">参考配置</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86%E8%AF%A6%E7%BB%86%E8%AF%B4%E6%98%8E"><span class="toc-number">5.3.0.3.5.</span> <span class="toc-text">资源管理详细说明</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E7%BB%84%E4%BB%B6%E8%BF%90%E8%A1%8C%E5%8F%82%E6%95%B0"><span class="toc-number">5.3.0.4.</span> <span class="toc-text">4. 组件运行参数</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E5%BA%94%E7%94%A8%E8%8C%83%E5%9B%B4%E7%AD%96%E7%95%A5%E8%AE%BE%E7%BD%AE-1"><span class="toc-number">5.3.0.4.1.</span> <span class="toc-text">参数应用范围策略设置</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E9%85%8D%E7%BD%AE-1"><span class="toc-number">5.3.0.4.2.</span> <span class="toc-text">参考配置</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%A4%9AHost-%E9%85%8D%E7%BD%AE"><span class="toc-number">5.3.0.4.3.</span> <span class="toc-text">多Host 配置</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%A2%84%E6%B5%8B%E4%BB%BB%E5%8A%A1%E9%85%8D%E7%BD%AE"><span class="toc-number">5.3.0.4.4.</span> <span class="toc-text">预测任务配置</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-FATE-FLOW%E8%BF%90%E8%A1%8Cjob%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86"><span class="toc-number">5.3.0.5.</span> <span class="toc-text">5.FATE-FLOW运行job基本原理</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Submit-Runtime-Conf%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B"><span class="toc-number">5.3.1.</span> <span class="toc-text">Submit Runtime Conf配置示例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%97%E6%B3%95"><span class="toc-number">6.</span> <span class="toc-text">算法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#FATE-ML"><span class="toc-number">6.1.</span> <span class="toc-text">FATE ML</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%97%E6%B3%95%E6%B8%85%E5%8D%95"><span class="toc-number">6.1.1.</span> <span class="toc-text">算法清单</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E5%8D%8F%E8%AE%AE"><span class="toc-number">6.1.2.</span> <span class="toc-text">安全协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%82%E6%95%B0"><span class="toc-number">6.1.3.</span> <span class="toc-text">参数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B"><span class="toc-number">7.</span> <span class="toc-text">示例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97"><span class="toc-number">7.1.</span> <span class="toc-text">示例使用指南</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#FATE-FLOW"><span class="toc-number">8.</span> <span class="toc-text">FATE-FLOW</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#FATE-Flow%E5%85%B3%E9%94%AE%E7%82%B9"><span class="toc-number">8.1.</span> <span class="toc-text">FATE-Flow关键点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%B6%E6%9E%84"><span class="toc-number">8.2.</span> <span class="toc-text">架构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%83%A8%E7%BD%B2"><span class="toc-number">8.3.</span> <span class="toc-text">部署</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%B3%95"><span class="toc-number">8.4.</span> <span class="toc-text">用法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#FATE-Flow-Client%E5%91%BD%E4%BB%A4%E8%A1%8C"><span class="toc-number">8.4.1.</span> <span class="toc-text">FATE-Flow Client命令行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#FATE-Flow-Client-SDK%E6%8C%87%E5%8D%97"><span class="toc-number">8.4.2.</span> <span class="toc-text">FATE-Flow Client SDK指南</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#FATE-Flow-REST-API"><span class="toc-number">8.4.3.</span> <span class="toc-text">FATE-Flow REST API</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#FATE%E6%A8%A1%E5%9E%8B%E5%8F%91%E5%B8%83%E5%8F%8A%E5%9C%A8%E7%BA%BF%E8%81%94%E9%82%A6%E6%8E%A8%E7%90%86%E6%8C%87%E5%8D%97"><span class="toc-number">8.4.4.</span> <span class="toc-text">FATE模型发布及在线联邦推理指南</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FATE-Pipeline%E4%BD%BF%E7%94%A8"><span class="toc-number">8.5.</span> <span class="toc-text">FATE Pipeline使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E4%B8%AAFATE-Job-%E6%98%AF%E4%B8%80%E4%B8%AA%E6%9C%89%E5%90%91%E6%97%A0%E7%8E%AF%E5%9B%BE"><span class="toc-number">8.5.1.</span> <span class="toc-text">一个FATE Job 是一个有向无环图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#pipeline%E6%8E%A5%E5%8F%A3"><span class="toc-number">8.5.2.</span> <span class="toc-text">pipeline接口</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Component"><span class="toc-number">8.5.2.1.</span> <span class="toc-text">Component</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Input"><span class="toc-number">8.5.2.2.</span> <span class="toc-text">Input</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Output"><span class="toc-number">8.5.2.3.</span> <span class="toc-text">Output</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Data"><span class="toc-number">8.5.2.4.</span> <span class="toc-text">Data</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Model"><span class="toc-number">8.5.2.5.</span> <span class="toc-text">Model</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%84%E5%BB%BApipeline"><span class="toc-number">8.5.3.</span> <span class="toc-text">构建pipeline</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A5-Keras-%E9%A3%8E%E6%A0%BC%E6%9E%84%E5%BB%BA-Fate-NN-%E6%A8%A1%E5%9E%8B"><span class="toc-number">8.5.3.1.</span> <span class="toc-text">以 Keras 风格构建 Fate NN 模型</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E8%BF%90%E8%A1%8C%E6%97%B6%E4%BD%9C%E4%B8%9A%E5%8F%82%E6%95%B0"><span class="toc-number">8.5.4.</span> <span class="toc-text">初始化运行时作业参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%90%E8%A1%8Cpipeline"><span class="toc-number">8.5.5.</span> <span class="toc-text">运行pipeline</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1%E6%9F%A5%E8%AF%A2"><span class="toc-number">8.5.6.</span> <span class="toc-text">任务查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%83%A8%E7%BD%B2%E7%BB%84%E4%BB%B6"><span class="toc-number">8.5.7.</span> <span class="toc-text">部署组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8pipeline%E8%BF%9B%E8%A1%8C%E9%A2%84%E6%B5%8B"><span class="toc-number">8.5.8.</span> <span class="toc-text">使用pipeline进行预测</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#pipeline%E7%9A%84%E4%BF%9D%E5%AD%98%E5%92%8C%E6%81%A2%E5%A4%8D"><span class="toc-number">8.5.9.</span> <span class="toc-text">pipeline的保存和恢复</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#pipeline%E6%B1%87%E6%80%BB%E4%BF%A1%E6%81%AF"><span class="toc-number">8.5.10.</span> <span class="toc-text">pipeline汇总信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%A1%E9%81%93%E4%B8%8E-CLI"><span class="toc-number">8.5.11.</span> <span class="toc-text">管道与 CLI</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E5%BF%97"><span class="toc-number">8.6.</span> <span class="toc-text">日志</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98"><span class="toc-number">8.7.</span> <span class="toc-text">常见问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E6%A0%B7%E4%BE%8B"><span class="toc-number">9.</span> <span class="toc-text">测试样例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B1-%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6"><span class="toc-number">9.1.</span> <span class="toc-text">测试用例1-上传文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B2-%E8%AE%AD%E7%BB%83%E5%92%8C%E8%AF%84%E4%BC%B0%E6%A8%A1%E5%9E%8B"><span class="toc-number">9.2.</span> <span class="toc-text">测试用例2-训练和评估模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B3-%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83%E3%80%81%E9%83%A8%E7%BD%B2%E5%8F%8A%E9%A2%84%E6%B5%8B"><span class="toc-number">9.3.</span> <span class="toc-text">测试用例3-模型训练、部署及预测</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pipeline%E6%90%AD%E5%BB%BA"><span class="toc-number">9.3.1.</span> <span class="toc-text">pipeline搭建</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#flow%E5%91%BD%E4%BB%A4%E6%90%AD%E5%BB%BA"><span class="toc-number">9.3.2.</span> <span class="toc-text">flow命令搭建</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B4-%E7%8B%AC%E7%AB%8B%E4%BD%BF%E7%94%A8pipeline%E6%90%AD%E5%BB%BA%E6%A8%A1%E5%9E%8B"><span class="toc-number">9.4.</span> <span class="toc-text">测试用例4-独立使用pipeline搭建模型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E9%80%89%E5%AE%9A%E5%90%88%E9%80%82%E7%9A%84%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E9%9B%86"><span class="toc-number">9.4.1.</span> <span class="toc-text">1.选定合适的算法和数据集</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%B8%8A%E4%BC%A0%E6%95%B0%E6%8D%AE%E9%9B%86"><span class="toc-number">9.4.2.</span> <span class="toc-text">2.上传数据集</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E7%BC%96%E5%86%99%E8%AE%AD%E7%BB%83%E5%92%8C%E9%AA%8C%E8%AF%81pipeline%E4%BB%A3%E7%A0%81"><span class="toc-number">9.4.3.</span> <span class="toc-text">3.编写训练和验证pipeline代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E7%BC%96%E5%86%99%E9%A2%84%E6%B5%8B-pipeline%E4%BB%A3%E7%A0%81"><span class="toc-number">9.4.4.</span> <span class="toc-text">4.编写预测 pipeline代码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#FATE-TEST"><span class="toc-number">10.</span> <span class="toc-text">FATE TEST</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#quick-start"><span class="toc-number">10.1.</span> <span class="toc-text">quick start</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E8%BE%91%E9%BB%98%E8%AE%A4%E7%9A%84-fat-test-config-yaml"><span class="toc-number">10.1.1.</span> <span class="toc-text">编辑默认的 fat_test_config.yaml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C-fate-test-%E5%A5%97%E4%BB%B6"><span class="toc-number">10.1.2.</span> <span class="toc-text">运行 fate_test 套件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E4%B8%80%E4%BA%9B-fate-test-%E5%9F%BA%E5%87%86%E6%B5%8B%E8%AF%95"><span class="toc-number">10.1.3.</span> <span class="toc-text">运行一些 fate_test 基准测试</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97"><span class="toc-number">11.</span> <span class="toc-text">开发指南</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#API"><span class="toc-number">12.</span> <span class="toc-text">API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97API"><span class="toc-number">12.1.</span> <span class="toc-text">计算API</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%81%94%E9%82%A6API"><span class="toc-number">13.</span> <span class="toc-text">联邦API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E6%95%B0-1"><span class="toc-number">13.1.</span> <span class="toc-text">参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%81%87%E5%88%B0%E8%BF%87%E7%9A%84%E6%8A%A5%E9%94%99%E4%BF%A1%E6%81%AF%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">13.2.</span> <span class="toc-text">遇到过的报错信息和解决方案</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Federated-schedule-error-Please-check-rollSite-and-fateflow"><span class="toc-number">13.2.1.</span> <span class="toc-text">Federated schedule error, Please check rollSite and fateflow</span></a></li></ol></li></ol></li></ol>
                                  </div>
                              </button>
                          
                          
                      
                    
                      <a href="#nexmoe-content" class="toc-link" aria-label="回到顶部" title="top"><button class="mdui-fab mdui-ripple"><i class="nexmoefont icon-caret-top"></i></button></a>
                  </div>
              </div>
            </div>
        </div>
    </div>
     
    <div id="nexmoe-search-space">
        <div class="search-container">
            <div class="search-header">
                <div class="search-input-container">
                    <input class="search-input" type="text" placeholder="Search" oninput="sinput();">
                </div>
                <a class="search-close" onclick="sclose();">×</a>
            </div>
            <div class="search-body"></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/combine/npm/lazysizes@5.1.0/lazysizes.min.js,npm/mdui@0.4.3/dist/js/mdui.min.js?v=1"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

 

<script async src="/js/app.js?v=1656038931273"></script>



<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js"></script>
<script>
	$(".justified-gallery").justifiedGallery({
		rowHeight: 160,
		margins: 10,
	});
</script>


    





    <!-- baidu Analytics -->
<script>
    var _hmt = _hmt || [];
    (function() {var hm = document.createElement('script');
    hm.src = 'https://hm.baidu.com/hm.js?0a7e154da92f76d05c83b48cbab331da#&lt;ID&gt;';
    var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>

</body>

</html>
